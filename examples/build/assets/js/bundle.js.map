{
  "version": 3,
  "sources": [
    "node_modules/factor-bundle/node_modules/browser-pack/_prelude.js",
    "/Users/mbaggio/www/backbone.uikit/examples/lib/app.js",
    "/Users/mbaggio/www/backbone.uikit/lib/utils/requestAnimationFrame.js",
    "/Users/mbaggio/www/backbone.uikit/lib/navigations/NavigationView.js",
    "/Users/mbaggio/www/backbone.uikit/examples/lib/MenuPage.js",
    "templates/menu.html",
    "/Users/mbaggio/www/backbone.uikit/examples/lib/DifferentSizeListViewPage.js",
    "/Users/mbaggio/www/backbone.uikit/lib/navigations/OsBarView.js",
    "../templates/navigations/os_bar_view.html",
    "/Users/mbaggio/www/backbone.uikit/lib/PageView.js",
    "/Users/mbaggio/www/backbone.uikit/lib/utils/animate.js",
    "/Users/mbaggio/www/backbone.uikit/lib/utils/BezierEasing.js",
    "/Users/mbaggio/www/backbone.uikit/lib/navigations/BarView.js",
    "/Users/mbaggio/www/backbone.uikit/examples/lib/DifferentSizeListView.js",
    "/Users/mbaggio/www/backbone.uikit/lib/listviews/ListView.js",
    "/Users/mbaggio/www/backbone.uikit/lib/utils/style.js",
    "/Users/mbaggio/www/backbone.uikit/lib/utils/getContextOptions.js",
    "/Users/mbaggio/www/backbone.uikit/lib/listviews/ListItemView.js",
    "/Users/mbaggio/www/backbone.uikit/lib/ImageView.js",
    "/Users/mbaggio/www/backbone.uikit/lib/BaseView.js",
    "/Users/mbaggio/www/backbone.uikit/examples/lib/models/ModelC.js",
    "/Users/mbaggio/www/backbone.uikit/examples/lib/models/ModelB.js",
    "/Users/mbaggio/www/backbone.uikit/examples/lib/models/ModelA.js",
    "/Users/mbaggio/www/backbone.uikit/examples/bower_components/backbone.viewstack/lib/viewstack.js"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "import context from 'context-utils';\nimport Viewstack from 'backbone.viewstack';\nimport NavigationView from '../../lib/navigations/NavigationView';\nimport MenuPage from './MenuPage';\nimport requestNextAnimationFrame from '../../lib/utils/requestAnimationFrame';\n\nconst viewstack = context.viewstack  = new Viewstack({ el: '#application' });\nviewstack.render();\n\nconst navigationView = context.navigation = new NavigationView({\n\tviewstack: viewstack\n});\n\nviewstack.pushView(navigationView);\n\n// Menu\nconst menuPage = new MenuPage({\n\tanimated: false,\n\tswipeBack: false\n});\nviewstack.pushView(menuPage);\n",
    "// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n\n// requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel\n\n// MIT license\n\n\nlet vendors  = ['ms', 'moz', 'webkit', 'o'];\nfor(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n\twindow.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\n\twindow.cancelAnimationFrame  = window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];\n}\n\nif (!window.requestAnimationFrame){\n\tvar lastTime = 0;\n\twindow.requestAnimationFrame = function(callback, element) {\n\t\tlet currTime   = new Date().getTime();\n\t\tlet timeToCall = Math.max(0, 16 - (currTime - lastTime));\n\t\tlet id         = window.setTimeout(function() { callback(currTime + timeToCall); }, timeToCall);\n\t\tlastTime       = currTime + timeToCall;\n\t\treturn id;\n\t};\n}\n\nif (!window.cancelAnimationFrame)\n\twindow.cancelAnimationFrame = function(id) { clearTimeout(id); };\n\nif (!window.requestNextAnimationFrame)\n\twindow.requestNextAnimationFrame = function (callback){\n\t\twindow.requestAnimationFrame(function () {\n\t\t\twindow.requestAnimationFrame(function (ts) {\n\t\t\t\tcallback(ts);\n\t\t\t});\n\t\t});\n\t}\n\nexport default window.requestNextAnimationFrame;\n",
    "\r\nimport _        from \"underscore\";\r\nimport context  from \"context-utils\";\r\nimport BaseView from \"../BaseView\";\r\nimport BarView  from \"./BarView\";\r\n// import { requestNextAnimationFrame } from \"../utils/requestAnimationFrame\";\r\n\r\nlet isView = function isView(view){\r\n\treturn _.isObject(view) && view.render;\r\n};\r\n\r\nexport default class NavigationView extends BaseView {\r\n\r\n\tclassName() {\r\n\t\treturn 'ui-navigation';\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t\tlet state = this.getState();\r\n\t\tthis.setDefaultsOptions({\r\n\t\t\tviewstack: state ? state.get('viewstack') : context.viewstack,\r\n\t\t\tmasterDetail: false\r\n\t\t});\r\n\r\n\t\tthis.visible = true;\r\n\r\n\t\tthis._stack    = [];\r\n\t\tthis.viewstack = this.options.viewstack;\r\n\r\n\t\tdelete this.options.viewstack;\r\n\r\n\t\tthis.listenTo(this.viewstack, 'pushed', this.onPushedView);\r\n\t\tthis.listenTo(this.viewstack, 'popped', this.onPoppedView);\r\n\t\tthis.listenTo(this.viewstack, 'clear', this.onClearViewstack);\r\n\t}\r\n\r\n\tpush(newBarView, animated) {\r\n\t\tlet activeBar = this.getActiveBar();\r\n\t\tif ( activeBar.view === newBarView )\r\n\t\t\treturn this;\r\n\r\n\t\t// If masterDetail option is true then we have to keep\r\n\t\t// the first navigation bar (aka \"The master navigation bar\")\r\n\t\t// in place.\r\n\t\tif ( this.options.masterDetail ) {\r\n\t\t\tif ( _.isEmpty(this._stack) )\r\n\t\t\t\tthis.masterView = newBarView;\r\n\r\n\t\t\tif ( this._stack.length <= 1 && typeof newBarView.hideBackButton === 'function' )\r\n\t\t\t\tnewBarView.hideBackButton();\r\n\t\t}\r\n\r\n\t\tlet newStackItem = {\r\n\t\t\tview: newBarView\r\n\t\t};\r\n\t\tthis._stack.unshift(newStackItem);\r\n\r\n\t\tif ( this._stack.length > 2 ) {\r\n\t\t\tlet popBar = this._stack.pop();\r\n\t\t\tlet popView = popBar.view;\r\n\t\t\tif ( isView(popView) && !_.isEqual(popView, this.masterView) ) {\r\n\t\t\t\tpopView.$el.detach();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( isView(newBarView) ) {\r\n\t\t\tnewBarView.setZindex(10);\r\n\t\t\tthis.$el.append(newBarView.el);\r\n\t\t\tnewBarView.render();\r\n\t\t\tnewStackItem.animationHandler = window.requestNextAnimationFrame(() => {\r\n\t\t\t\tnewStackItem.animationHandler = null;\r\n\t\t\t\tnewBarView.move(100, BarView.PUSH, animated === undefined || animated);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tlet oldBar = this.getOldBar();\r\n\t\tlet oldBarView = oldBar.view;\r\n\t\tif ( isView(oldBarView) ) {\r\n\t\t\tif (oldBar.animationHandler) {\r\n\t\t\t\twindow.cancelAnimationFrame(oldBar.animationHandler);\r\n\t\t\t\toldBar.animationHandler = null;\r\n\t\t\t}\r\n\t\t\toldBarView.setZindex(0);\r\n\t\t\twindow.requestNextAnimationFrame(() => {\r\n\t\t\t\toldBarView.move(0, BarView.DETACH, true);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpop(popBarView) {\r\n\t\tlet activeBar = this.getActiveBar();\r\n\t\tlet oldBar    = this.getOldBar();\r\n\r\n\t\tlet activeBarView = activeBar.view;\r\n\t\tlet oldBarView = oldBar.view;\r\n\r\n\t\t// Ensure we doesn't pop the same bar view\r\n\t\tif ( oldBarView === popBarView )\r\n\t\t\treturn this;\r\n\r\n\t\tif ( isView(activeBarView) ) {\r\n\t\t\tactiveBarView.setZindex(0);\r\n\t\t\tactiveBarView.move(0, BarView.POP, true);\r\n\t\t}\r\n\r\n\t\tif ( isView(oldBarView) ) {\r\n\t\t\toldBarView.setZindex(10);\r\n\t\t\toldBarView.move(100, BarView.RESTORE, true);\r\n\t\t}\r\n\r\n\t\tthis._stack.shift();\r\n\r\n\t\t// Retrieve the bar view from the last PageView of viewstack\r\n\t\tlet pageView = this.viewstack.getViewAtIndex(this.viewstack.size() - 2);\r\n\t\tlet newBarView;\r\n\t\tif (isView(pageView) && pageView.getNavigationBar) {\r\n\t\t\tnewBarView = pageView.getNavigationBar();\r\n\t\t\tthis._stack.push({\r\n\t\t\t\tview: newBarView\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.requestAnimationFrame(()=>{\r\n\t\t\t\tif (isView(activeBarView))\r\n\t\t\t\t\tactiveBarView.$el.detach();\r\n\r\n\t\t\t\tif (isView(newBarView)) {\r\n\t\t\t\t\tnewBarView.setZindex(0);\r\n\t\t\t\t\tthis.$el.append(newBarView.el);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t}, activeBarView && activeBarView.options ? activeBarView.options.duration : 300 );\r\n\r\n\t\t// this.requestAnimationFrame(()=>{\t});\r\n\r\n\t}\r\n\r\n\tgetActiveBar() {\r\n\t\treturn this._stack[0] || {};\r\n\t}\r\n\r\n\tgetOldBar() {\r\n\t\treturn this._stack[1] || {};\r\n\t}\r\n\r\n\tonPushedView(view) {\r\n\t\tif ( !view || !view.getNavigationBar )\r\n\t\t\treturn;\r\n\t\tlet barView = view.getNavigationBar();\r\n\t\tthis.push( barView, view.options.animated );\r\n\t}\r\n\r\n\tonPoppedView(view) {\r\n\t\tif ( !view || !view.getNavigationBar )\r\n\t\t\treturn;\r\n\t\tlet barView = view.getNavigationBar();\r\n\t\tthis.pop(barView);\r\n\t}\r\n\r\n\tonClearViewstack(viewstack) {\r\n\t\tthis.requestAnimationFrame(()=>{\r\n\t\t\tlet size = viewstack.size();\r\n\t\t\t_.forEach(this._stack, (aBar) => {\r\n\t\t\t\tif ( aBar && aBar.view )\r\n\t\t\t\t\taBar.view.$el.detach();\r\n\t\t\t});\r\n\t\t\tthis._stack = [];\r\n\t\t\tif (size === 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (size > 1) {\r\n\t\t\t\tthis.onPushedView(viewstack._stack[size - 2].view);\r\n\t\t\t}\r\n\t\t\tthis.onPushedView(viewstack._stack[size - 1].view);\r\n\t\t});\r\n\t}\r\n\r\n\tonSwipeBack(percent, animated) {\r\n\t\tlet activeBar = this.getActiveBar();\r\n\t\tlet oldBar    = this.getOldBar();\r\n\r\n\t\tlet activeBarView = activeBar.view;\r\n\t\tlet oldBarView = oldBar.view;\r\n\r\n\t\tif ( isView(activeBarView) )\r\n\t\t\tactiveBarView.move(percent, BarView.POP, animated);\r\n\t\tif ( isView(oldBarView) )\r\n\t\t\toldBarView.move(100-percent, BarView.RESTORE, animated);\r\n\t}\r\n\r\n\tshow() {\r\n\t\tif (!this.visible) {\r\n\t\t\tthis.requestAnimationFrame(() => {\r\n\t\t\t\tthis.el.style.display = 'block';\r\n\t\t\t\tthis.el.style.opacity = 1;\r\n\t\t\t\tthis.visible = true;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thide() {\r\n\t\tif (this.visible) {\r\n\t\t\tthis.requestAnimationFrame(() => {\r\n\t\t\t\tthis.el.style.opacity = 0;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.requestAnimationFrame(() => {\r\n\t\t\t\t\t\tthis.el.style.display = 'none';\r\n\t\t\t\t\t\tthis.visible = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 150);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\ttoggle() {\r\n\t\tif (this.visible === false) {\r\n\t\t\tthis.show();\r\n\t\t} else {\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t}\r\n\r\n\tisVisible() {\r\n\t\treturn this.visible;\r\n\t}\r\n\r\n};\r\n",
    "import _ from 'underscore';\nimport $ from 'jquery';\nimport context from 'context-utils';\nimport PageView from '../../lib/PageView';\nimport OsBarView from '../../lib/navigations/OsBarView';\nimport ListView from '../../lib/listviews/ListView';\nimport DifferentSizeListViewPage from './DifferentSizeListViewPage';\n\nexport default class MenuPage extends PageView {\n\n\taddClass() {\n\t\treturn 'menu-page';\n\t}\n\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tthis.template = require('../templates/menu.html');\n\n\t\tthis.addEvents({\n\t\t\t'click .js-different-size': 'onDifferentSizeClick',\n\t\t\t'click .js-different-size-with-header': 'onDifferentSizeWithHeaderClick',\n\t\t\t'click .js-different-size-with-2-columns': 'onDifferentSizeWith2ColumnsClick',\n\t\t\t'click .js-different-size-with-3-columns': 'onDifferentSizeWith3ColumnsClick',\n\t\t\t'click .js-horizontal-different-size': 'onHorizontalDifferentSizeClick',\n\t\t\t'click .js-horizontal-different-size-with-header': 'onHorizontalDifferentSizeWithHeaderClick',\n\t\t\t'click .js-horizontal-different-size-with-2-columns': 'onHorizontalDifferentSizeWith2ColumnsClick',\n\t\t\t'click .js-horizontal-different-size-with-3-columns': 'onHorizontalDifferentSizeWith3ColumnsClick'\n\t\t});\n\n\t\tlet state = this.getState();\n\t\tlet navigationBarView = new OsBarView({\n\t\t\tstate: state,\n\t\t\taddClass: 'back-bar',\n\t\t\tcenter: $('<span class=\"title\"></span>').text('Examples'),\n\t\t\tpopViewOnBackButton: false\n\t\t});\n\t\tthis.addSubView('navigationBarView', navigationBarView);\n\t}\n\n\tgetNavigationBar() {\n\t\treturn this.getSubView('navigationBarView');\n\t}\n\n\tonRender(rendered) {\n\t\tif (!rendered) {\n\t\t\tthis.$el.html(this.template());\n\t\t}\n\t}\n\n\t//\n\t// Vertial list view\n\t//\n\n\tonDifferentSizeClick() {\n\t\tconst differentSizeListViewPage = new DifferentSizeListViewPage();\n\t\tcontext.viewstack.pushView(differentSizeListViewPage);\n\t}\n\n\tonDifferentSizeWithHeaderClick() {\n\t\tconst differentSizeListViewPage = new DifferentSizeListViewPage({\n\t\t\tlistview: {\n\t\t\t\theaderSize: 40\n\t\t\t}\n\t\t});\n\t\tcontext.viewstack.pushView(differentSizeListViewPage);\n\t}\n\n\tonDifferentSizeWith2ColumnsClick() {\n\t\tconst differentSizeListViewPage = new DifferentSizeListViewPage({\n\t\t\tlistview: {\n\t\t\t\titemsPerRow: 2\n\t\t\t}\n\t\t});\n\t\tcontext.viewstack.pushView(differentSizeListViewPage);\n\t}\n\n\tonDifferentSizeWith3ColumnsClick() {\n\t\tconst differentSizeListViewPage = new DifferentSizeListViewPage({\n\t\t\tlistview: {\n\t\t\t\titemsPerRow: 3\n\t\t\t}\n\t\t});\n\t\tcontext.viewstack.pushView(differentSizeListViewPage);\n\t}\n\n\t//\n\t// Horizontal list view\n\t//\n\n\tonHorizontalDifferentSizeClick() {\n\t\tconst differentSizeListViewPage = new DifferentSizeListViewPage({\n\t\t\tlistview: {\n\t\t\t\torientation: ListView.ORIENTATION_HORIZONTAL\n\t\t\t}\n\t\t});\n\t\tcontext.viewstack.pushView(differentSizeListViewPage);\n\t}\n\n\tonHorizontalDifferentSizeWithHeaderClick() {\n\t\tconst differentSizeListViewPage = new DifferentSizeListViewPage({\n\t\t\tlistview: {\n\t\t\t\torientation: ListView.ORIENTATION_HORIZONTAL,\n\t\t\t\theaderSize: 40\n\t\t\t}\n\t\t});\n\t\tcontext.viewstack.pushView(differentSizeListViewPage);\n\t}\n\n\tonHorizontalDifferentSizeWith2ColumnsClick() {\n\t\tconst differentSizeListViewPage = new DifferentSizeListViewPage({\n\t\t\tlistview: {\n\t\t\t\torientation: ListView.ORIENTATION_HORIZONTAL,\n\t\t\t\titemsPerRow: 2\n\t\t\t}\n\t\t});\n\t\tcontext.viewstack.pushView(differentSizeListViewPage);\n\t}\n\n\tonHorizontalDifferentSizeWith3ColumnsClick() {\n\t\tconst differentSizeListViewPage = new DifferentSizeListViewPage({\n\t\t\tlistview: {\n\t\t\t\torientation: ListView.ORIENTATION_HORIZONTAL,\n\t\t\t\titemsPerRow: 3\n\t\t\t}\n\t\t});\n\t\tcontext.viewstack.pushView(differentSizeListViewPage);\n\t}\n\n\n}\n",
    "module.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<h1>ListView</h1>\\n<h2>Vertical</h2>\\n<div>\\n\\t<button class=\"button js-different-size\">Different size</button>\\n\\t<button class=\"button js-different-size-with-header\">With header</button>\\n\\t<button class=\"button js-different-size-with-2-columns\">With 2 columns</button>\\n\\t<button class=\"button js-different-size-with-3-columns\">With 3 columns</button>\\n</div>\\n<h2>Horizontal</h2>\\n<div>\\n\\t<button class=\"button js-horizontal-different-size\">Different size</button>\\n\\t<button class=\"button js-horizontal-different-size-with-header\">With header</button>\\n\\t<button class=\"button js-horizontal-different-size-with-2-columns\">With 2 rows</button>\\n\\t<button class=\"button js-horizontal-different-size-with-3-columns\">With 3 rows</button>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "import _ from 'underscore';\nimport $ from 'jquery';\nimport context from 'context-utils';\nimport { Collection } from 'backbone';\nimport PageView from '../../lib/PageView';\nimport OsBarView from '../../lib/navigations/OsBarView';\nimport DifferentSizeListView from './DifferentSizeListView';\nimport ModelA from './models/ModelA';\nimport ModelB from './models/ModelB';\nimport ModelC from './models/ModelC';\n\nexport default class DifferentSizeListViewPage extends PageView {\n\n\taddClass() {\n\t\treturn 'different-size-list-view';\n\t}\n\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tconst state = this.getState();\n\t\tconst navigationBarView = new OsBarView({\n\t\t\tstate: state,\n\t\t\taddClass: 'back-bar',\n\t\t\tleft: '<span>Back</span>',\n\t\t\tcenter: $('<span class=\"title\"></span>').text('Different size list view'),\n\t\t\tpopViewOnBackButton: true\n\t\t});\n\t\tthis.addSubView('navigationBarView', navigationBarView);\n\n\t\tthis.initCollection();\n\n\t\tconst differentSizeListView = new DifferentSizeListView(_.extend(this.options.listview || {}, {\n\t\t\tcollection: this.collection\n\t\t}));\n\t\tthis.addSubView('differentSizeListView', differentSizeListView);\n\n\t\t// For debug\n\t\twindow.__listView = differentSizeListView;\n\t}\n\n\tgetNavigationBar() {\n\t\treturn this.getSubView('navigationBarView');\n\t}\n\n\tonRender(rendered) {\n\t\tif (!rendered) {\n\t\t\tconst differentSizeListView = this.getSubView('differentSizeListView');\n\t\t\tthis.$el.append(differentSizeListView.el);\n\t\t\tdifferentSizeListView.render();\n\t\t}\n\t}\n\n\t//\n\t// Utils\n\t//\n\n\tinitCollection() {\n\t\tconst colors = [\n\t\t\t'rgb(156, 221, 174)',\n\t\t\t'rgb(219, 204, 126)',\n\t\t\t'rgb(126, 177, 219)'\n\t\t];\n\n\t\tconst getImage = (size) => {\n\t\t\treturn 'http://via.placeholder.com/200x200'; //?_=' + Math.floor(Math.random() * 1000000);\n\t\t};\n\n\t\tconst models = [];\n\t\tlet aModelClass;\n\t\tfor (var i = 0; i < 100; i++) {\n\t\t\tlet size = (i % 3 + 1) * 100;\n\t\t\tswitch (i%3) {\n\t\t\t\tcase 0: aModelClass = ModelA; break;\n\t\t\t\tcase 1: aModelClass = ModelB; break;\n\t\t\t\tcase 2: aModelClass = ModelC; break;\n\t\t\t}\n\t\t\tmodels.push(new aModelClass({\n\t\t\t\tid: i,\n\t\t\t\tsize: size,\n\t\t\t\tcolor: colors[i % 3],\n\t\t\t\timage: getImage(size)\n\t\t\t}));\n\t\t}\n\n\t\tconst differentSizeCollection = new Collection(models);\n\t\tthis.collection = differentSizeCollection;\n\t}\n\n}\n",
    "import _        from \"underscore\";\nimport $        from \"jquery\";\nimport context  from \"context-utils\";\nimport { View } from \"backbone\";\nimport BarView  from \"./BarView\";\nimport BezierEasing from \"../utils/BezierEasing\";\nimport animate  from \"../utils/animate\";\nimport { getVendorStyle } from \"../utils/style\";\nimport getContextOptions from \"../utils/getContextOptions\";\n\nconst ANIMATION_PUSH_LEFT = 'push_left';\nconst ANIMATION_ZOOM_IN   = 'zoom_in';\n\n// export default class OsBarView extends BarView {\nexport default class OsBarView extends BarView {\n\n\tclassName() {\n\t\t// Deprecated: ui-ios-navigation-bar\n\t\treturn 'ui-navigation-bar ui-ios-navigation-bar ui-os-navigation-bar';\n\t}\n\n\tconstructor(options) {\n\t\tsuper(options);\n\t\tlet state = this.getState();\n\n\t\tthis.template = require('../../templates/navigations/os_bar_view.html');\n\t\tthis.setDefaultsOptions(getContextOptions('OsBarView') || {}, {\n\t\t\taddClass:            '',\n\t\t\tviewstack:           state ? state.get('viewstack') : context.viewstack,\n\t\t\tleft:                null,\n\t\t\tcenter:              null,\n\t\t\tright:               null,\n\t\t\thideBackButton:      false,\n\t\t\tpopViewOnBackButton: true,\n\t\t\tpageAnimation:       ANIMATION_PUSH_LEFT // Don't set to null or _.defaults consider it as valid value\n\t\t});\n\n\t\tthis.viewstack = this.options.viewstack;\n\t\tdelete this.options.viewstack;\n\n\t\tif (_.result(this.options, 'addClass')) {\n\t\t\tthis.$el.addClass( _.result( this.options, 'addClass' ) || '' );\n\t\t}\n\n\t\tthis.addEvents({\n\t\t\t'click .left-side':   'onLeftSideClick',\n\t\t\t'click .center-side': 'onCenterSideClick',\n\t\t\t'click .right-side':  'onRightSideClick'\n\t\t});\n\n\t\tthis._oldPercent = -1;\n\n\t\tthis.debounce('onLeftSideClick');\n\t\tthis.debounce('onCenterSideClick');\n\t\tthis.debounce('onRightSideClick');\n\n\t}\n\n\tonLeftSideClick(e) {\n\t\tif (this.options.popViewOnBackButton) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\t$(':focus').blur();\n\t\t\tthis.viewstack.popView(null,{ animated: true, delay: true });\n\t\t}\n\t\tthis.trigger('leftClick', e);\n\t}\n\n\tonCenterSideClick(e) {\n\t\tthis.trigger('centerClick', e);\n\t}\n\n\tonRightSideClick(e) {\n\t\tthis.trigger('rightClick', e);\n\t}\n\n\tshowBackButton() {\n\t\tthis.options.hideBackButton = false;\n\t\tif ( !this.rendered ) return;\n\t\tthis.requestAnimationFrame(()=>{\n\t\t\tthis.cache.left.display = '';\n\t\t});\n\t}\n\n\thideBackButton() {\n\t\tthis.options.hideBackButton = true;\n\t\tif ( !this.rendered ) return;\n\t\tthis.requestAnimationFrame(()=>{\n\t\t\tthis.cache.left.display = 'none';\n\t\t});\n\n\t}\n\n\tonRender(rendered) {\n\t\tif ( rendered ) return this;\n\n\t\tlet left   = this.cache.left    = document.createElement('div');\n\t\tlet center = this.cache.center  = document.createElement('div');\n\t\tlet right  = this.cache.right   = document.createElement('div');\n\n\t\tleft.className   = 'left-side';\n\t\tcenter.className = 'center-side';\n\t\tright.className  = 'right-side';\n\n\t\tleft.style.opacity   = 0;\n\t\tcenter.style.opacity = 0;\n\t\tright.style.opacity  = 0;\n\n\t\tif ( this.options.hideBackButton )\n\t\t\tleft.style.display = 'none';\n\n\t\tthis.$el.append( left, center, right );\n\n\t\tif ( this.options.left ) {\n\t\t\tif ( this.options.left instanceof View ) {\n\t\t\t\tthis.addSubView(this.options.left.cid, this.options.left);\n\t\t\t\tleft.appendChild( this.options.left.el );\n\t\t\t\tthis.options.left.render();\n\t\t\t}\n\t\t\telse if ( this.options.left instanceof $ )\n\t\t\t\tleft.appendChild( this.options.left.get(0) );\n\t\t\telse\n\t\t\t\tleft.innerHTML = this.options.left;\n\t\t}\n\n\t\tif ( this.options.center ) {\n\t\t\tif ( this.options.center instanceof View ) {\n\t\t\t\tthis.addSubView(this.options.center.cid, this.options.center);\n\t\t\t\tcenter.appendChild( this.options.center.el );\n\t\t\t\tthis.options.center.render();\n\t\t\t}\n\t\t\telse if ( this.options.center instanceof $ )\n\t\t\t\tcenter.appendChild( this.options.center.get(0) );\n\t\t\telse\n\t\t\t\tcenter.innerHTML = this.options.center;\n\t\t}\n\n\t\tif ( this.options.right ) {\n\t\t\tif ( this.options.right instanceof View ) {\n\t\t\t\tthis.addSubView(this.options.right.cid, this.options.right);\n\t\t\t\tright.appendChild( this.options.right.el );\n\t\t\t\tthis.options.right.render();\n\t\t\t}\n\t\t\telse if ( this.options.right instanceof $ )\n\t\t\t\tright.appendChild( this.options.right.get(0) );\n\t\t\telse\n\t\t\t\tright.innerHTML = this.options.right;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tmove(percent, direction, animated) {\n\t\tswitch (this.options.pageAnimation) {\n\t\t\tcase ANIMATION_PUSH_LEFT:\n\t\t\t\tthis.movePushLeft(percent, direction, animated);\n\t\t\t\tbreak;\n\t\t\tcase ANIMATION_ZOOM_IN:\n\t\t\t\tthis.moveZoomIn(percent, direction, animated);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tmovePushLeft(percent, direction, animated){\n\t\tif (!this.rendered)\n\t\t\treturn;\n\n\t\tlet easingIn  = BezierEasing(.01,.69,.36,1);\n\t\tlet easingOut = BezierEasing(.81,.09,.1,.6);\n\t\tpercent = percent / 100;\n\n\t\tconst delta       = 40;\n\t\tlet left          = this.cache.left;\n\t\tlet center        = this.cache.center;\n\t\tlet right         = this.cache.right;\n\t\tlet transform     = '';\n\t\tlet initTransform = '';\n\n\t\tswitch (direction) {\n\t\t\tcase OsBarView.PUSH:\n\t\t\t\tpercent = easingIn(percent);\n\t\t\t\ttransform = 'translate3d(0%, 0, 0)';\n\t\t\t\tinitTransform = 'translate3d('+delta+'%, 0, 0)';\n\t\t\tbreak;\n\t\t\tcase OsBarView.DETACH:\n\t\t\t\tpercent = easingOut(percent);\n\t\t\t\ttransform = 'translate3d('+(-delta*(1-percent))+'%, 0, 0)';\n\t\t\t\tinitTransform = 'translate3d(0, 0, 0)';\n\t\t\tbreak;\n\t\t\tcase OsBarView.RESTORE:\n\t\t\t\tpercent = easingOut(percent);\n\t\t\t\ttransform = 'translate3d('+(-delta*(1-percent))+'%, 0, 0)';\n\t\t\t\tinitTransform = 'translate3d(-'+delta+'%, 0, 0)';\n\t\t\tbreak;\n\t\t\tcase OsBarView.POP:\n\t\t\t\tpercent = easingOut(percent);\n\t\t\t\ttransform = 'translate3d('+(delta*(1-percent))+'%, 0, 0)';\n\t\t\t\tinitTransform = 'translate3d(0, 0, 0)';\n\t\t\tbreak;\n\t\t}\n\n\t\tleft.style[getVendorStyle('transition')]   = '';\n\t\tcenter.style[getVendorStyle('transition')] = '';\n\t\tright.style[getVendorStyle('transition')]  = '';\n\n\t\tif (animated) {\n\t\t\tif (this._oldPercent !== -1) {\n\t\t\t\tinitTransform = null;\n\t\t\t}\n\n\t\t\tanimate(left, {\n\t\t\t\tduration: this.options.duration + 'ms',\n\t\t\t\ttiming: 'ease-out',\n\t\t\t\tstart: {\n\t\t\t\t\t'transform': initTransform,\n\t\t\t\t\t'opacity': null\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\t'transform': transform,\n\t\t\t\t\t'opacity': percent * percent\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tanimate(center, {\n\t\t\t\tduration: this.options.duration + 'ms',\n\t\t\t\tstart: {\n\t\t\t\t\t'transform': initTransform,\n\t\t\t\t\t'opacity': null\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\t'transform': transform,\n\t\t\t\t\t'opacity': percent\n\t\t\t\t}\n\t\t\t}, () => {\n\t\t\t\t// end\n\t\t\t\tthis._oldPercent = -1;\n\t\t\t});\n\n\t\t\tanimate(right, {\n\t\t\t\tduration: this.options.duration + 'ms',\n\t\t\t\ttiming: 'ease-out',\n\t\t\t\tstart: {\n\t\t\t\t\t'transform': initTransform,\n\t\t\t\t\t'opacity': null\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\t'transform': transform,\n\t\t\t\t\t'opacity': percent * percent\n\t\t\t\t}\n\t\t\t});\n\n\t\t} else {\n\t\t\tthis._oldPercent = percent;\n\n\t\t\tleft.style.opacity   = percent * percent;\n\t\t\tcenter.style.opacity = percent;\n\t\t\tright.style.opacity  = percent * percent;\n\n\t\t\tleft.style[ getVendorStyle( 'transform' ) ]   = transform;\n\t\t\tcenter.style[ getVendorStyle( 'transform' ) ] = transform;\n\t\t\tright.style[ getVendorStyle( 'transform' ) ]  = transform;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tmoveZoomIn(percent, direction, animated){\n\t\tif (!this.rendered)\n\t\t\treturn;\n\n\t\tlet easingIn  = BezierEasing(.01,.69,.36,1);\n\t\tlet easingOut = BezierEasing(.81,.09,.1,.6);\n\t\tpercent = percent / 100;\n\n\t\tlet left        = this.cache.left;\n\t\tlet center      = this.cache.center;\n\t\tlet right       = this.cache.right;\n\t\tlet opacity     = '';\n\t\tlet initOpacity = '';\n\n\t\tswitch (direction) {\n\t\t\tcase OsBarView.PUSH:\n\t\t\tcase OsBarView.RESTORE:\n\t\t\t\tinitOpacity = 0;\n\t\t\t\topacity = 1;\n\t\t\tbreak;\n\t\t\tcase OsBarView.DETACH:\n\t\t\tcase OsBarView.POP:\n\t\t\t\tinitOpacity = 1;\n\t\t\t\topacity = 0;\n\t\t\tbreak;\n\t\t}\n\n\t\tif (animated) {\n\t\t\tanimate(left, {\n\t\t\t\tduration: this.options.duration + 'ms',\n\t\t\t\ttiming: 'ease-out',\n\t\t\t\tstart: {\n\t\t\t\t\t'opacity': initOpacity\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\t'opacity': opacity * opacity\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tanimate(center, {\n\t\t\t\tduration: this.options.duration + 'ms',\n\t\t\t\tstart: {\n\t\t\t\t\t'opacity': initOpacity\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\t'opacity': opacity\n\t\t\t\t}\n\t\t\t}, () => {\n\t\t\t\t// end\n\t\t\t\tthis._oldPercent = -1;\n\t\t\t});\n\n\t\t\tanimate(right, {\n\t\t\t\tduration: this.options.duration + 'ms',\n\t\t\t\ttiming: 'ease-out',\n\t\t\t\tstart: {\n\t\t\t\t\t'opacity': initOpacity\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\t'opacity': opacity * opacity\n\t\t\t\t}\n\t\t\t});\n\n\t\t} else {\n\t\t\tthis._oldPercent = percent;\n\n\t\t\topacity = easingOut(percent);\n\n\t\t\tleft.style.opacity   = opacity * opacity;\n\t\t\tcenter.style.opacity = opacity;\n\t\t\tright.style.opacity  = opacity * opacity;\n\t\t}\n\n\t\treturn this;\n\t}\n\n};\n",
    "module.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"left-side\" data-placeholder=\"left-side\" ></div>\\n<div class=\"center-side\" data-placeholder=\"center-side\" ></div>\\n<div class=\"right-side\" data-placeholder=\"right-side\" ></div>';\n}\nreturn __p;\n};\n",
    "\nimport _                 from \"underscore\";\nimport $                 from \"jquery\";\nimport context           from \"context-utils\";\nimport Backbone          from \"backbone\";\nimport BaseView          from \"./BaseView\";\nimport animate           from \"./utils/animate\";\nimport BezierEasing      from \"./utils/BezierEasing\";\nimport BarView           from \"./navigations/BarView\";\nimport getContextOptions from \"./utils/getContextOptions\";\nimport { getVendorStyle, translate3d, scaleAndTranslate3d } from \"./utils/style\";\n\n//\n// Utils\n//\n\nlet getTouch = function getTouch(ev){\n\tlet touch;\n\tif ( ev && ev.changedTouches ){\n\t\tlet changedTouches = ev.changedTouches;\n\t\tif( changedTouches && changedTouches.length > 0 ){\n\t\t\ttouch = changedTouches[0];\n\t\t}\n\t}\n\treturn touch;\n};\n\nlet getPageX = function getPageX(ev){\n\tlet pageX = 0;\n\tlet touch = getTouch(ev);\n\tif ( touch && _.isNumber(touch.pageX) )\n\t\tpageX = touch.pageX;\n\treturn pageX;\n};\nlet getPageY = function getPageY(ev){\n\tlet pageY = 0;\n\tlet touch = getTouch(ev);\n\tif ( touch && _.isNumber(touch.pageY) )\n\t\tpageY = touch.pageY;\n\treturn pageY;\n};\nlet isInRect = function isInRect( x, y, top, left, width, height ) {\n\treturn x >= left && x <= (left+width) && y >= top && y <= (top+height);\n};\n\n//\n// Page View\n//\n\nconst STATUS_NORMAL = 'normal';\nconst STATUS_MOVING = 'moving';\n\nconst ANIMATION_PUSH_LEFT = 'push_left';\nconst ANIMATION_ZOOM_IN   = 'zoom_in';\n\nexport default class PageView extends BaseView {\n\n\tclassName() {\n\t\treturn 'ui-page ' + ( _.result(this, \"addClass\") || '' );\n\t}\n\n\tconstructor(options){\n\t\tsuper(options);\n\n\t\tlet state = this.getState();\n\n\t\tthis._oldPercent = -1;\n\t\tthis.viewport    = context.device && context.device.getViewport ? context.device.getViewport() : {width: 0, height: 0};\n\t\tthis.isActive    = false;\n\t\tthis.pageStatus      = STATUS_NORMAL;\n\n\t\tthis.setDefaultsOptions(getContextOptions('PageView'), {\n\t\t\tswipeBack               : true,\n\t\t\tanimated                : true,\n\t\t\tduration                : 300,\n\t\t\tdeltaPageRender         : 100,\n\t\t\tviewstack               : state ? state.get('viewstack') : context.viewstack,\n\t\t\tnavigation              : state ? state.get('navigation') : context.navigation,\n\t\t\tswipeBackDirection      : 'horizontal', // horizontal, vertical, all\n\t\t\tswipeBackClassName      : 'swipe-back',\n\t\t\tswipeBackBoundaryLeft   : 0,\n\t\t\tswipeBackBoundaryTop    : 0,\n\t\t\tswipeBackBoundaryWidth  : 40,\n\t\t\tswipeBackBoundaryHeight : this.viewport.height,\n\t\t\tswipeBackVelocityLimit  : 0.4, // Velocity limit to trigger viewstack.popView()\n\t\t\tpageAnimation           : ANIMATION_PUSH_LEFT // Don't set to null or _.defaults consider it as valid value\n\t\t});\n\n\t\tthis.viewstack = this.options.viewstack;\n\t\tdelete this.options.viewstack;\n\n\t\tthis.renderingTimeoutHandler = null;\n\n\t\t// Set navigation controller\n\t\tthis.setNavigationView( this.options.navigation );\n\n\t}\n\n\tonBeforePush() {\n\t\t//\n\t\t// Animation start\n\t\t//\n\t\tswitch(this.options.pageAnimation) {\n\t\t\tcase ANIMATION_PUSH_LEFT:\n\t\t\t\tif (this.options.animated) {\n\t\t\t\t\tthis.el.style[ getVendorStyle('backfaceVisibility') ]  = 'hidden';\n\t\t\t\t\ttranslate3d(this.el, '100%', 0, 0, true); // if you put pixels the transform does not work\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ANIMATION_ZOOM_IN:\n\t\t\t\tthis.options.swipeBack = false;\n\t\t\t\tif (this.options.animated) {\n\t\t\t\t\tthis.el.style[ getVendorStyle('backfaceVisibility') ]  = 'hidden';\n\t\t\t\t\tscaleAndTranslate3d(this.el, 0.8, 0, 0, 0, true);\n\t\t\t\t\tthis.el.style.opacity = 0;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\t//\n\t\t// Swipe back\n\t\t//\n\t\tthis._swipeBackStop = false;\n\t\tif ( this.options.swipeBack === true ){\n\n\t\t\tthis.onSwipeBackTouchStart = _.bind(this.onSwipeBackTouchStart, this);\n\t\t\tthis.onSwipeBackTouchMove  = _.bind(this.onSwipeBackTouchMove, this);\n\t\t\tthis.onSwipeBackTouchEnd   = _.bind(this.onSwipeBackTouchEnd, this);\n\n\t\t\tthis.el.addEventListener( 'touchstart', this.onSwipeBackTouchStart );\n\t\t}\n\t}\n\n\t// Render\n\trender() {\n\t\t// If the view is moving delay the render\n\t\tif ( this.pageStatus == STATUS_MOVING ) {\n\t\t\tif (this.renderingTimeoutHandler)\n\t\t\t\tclearTimeout(this.renderingTimeoutHandler);\n\t\t\tthis.renderingTimeoutHandler = setTimeout(() => {\n\t\t\t\tthis.renderingTimeoutHandler = null;\n\t\t\t\tthis.render();\n\t\t\t},  this.options.duration );\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.options.animated === true && !this.rendered ) {\n\t\t\t// Move animation\n\t\t\tif (!this.moved) {\n\t\t\t\tthis.move(100, 0, true);\n\t\t\t\tthis.moved = true;\n\t\t\t}\n\t\t\t// Rendering\n\t\t\twindow.requestNextAnimationFrame(() => {\n\t\t\t\tif (this.renderingTimeoutHandler)\n\t\t\t\t\tclearTimeout(this.renderingTimeoutHandler);\n\t\t\t\tthis.renderingTimeoutHandler =\n\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\tthis.renderingTimeoutHandler = null;\n\t\t\t\t\t\treturn super.render();\n\t\t\t\t\t}, this.options.duration + this.options.deltaPageRender );\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\treturn super.render();\n\t}\n\n\t// Navigation view\n\tsetNavigationView(navigation){\n\t\tlet ctx = this.getState() || context; // Todo: Sostituire con State\n\t\tif ( navigation instanceof Backbone.View ){\n\t\t\tthis.navigation = navigation;\n\t\t}else if ( ctx && ctx.views && ctx.views.navigation ){\n\t\t\tthis.navigation = ctx.views.navigation;\n\t\t}else{\n\t\t\tthis.navigation = null;\n\t\t}\n\t\treturn this;\n\t}\n\n\tgetNavigationView(){\n\t\treturn this.navigation;\n\t}\n\n\tgetNavigationBar(){\n\t\treturn null;\n\t}\n\n\n\t// Può assumere più valori.\n\t// @return Number millisecondi di durata dell'animazione\n\t// @return String nome dell'animazione CSS\n\tgetAnimationPushDuration(){\n\t\treturn this.options.animated ? this.options.duration : null;\n\t}\n\n\t// Può assumere più valori.\n\t// @return Number millisecondi di durata dell'animazione\n\t// @return String nome dell'animazione CSS\n\tgetAnimationPopDuration(){\n\t\treturn this.options.duration || null;\n\t}\n\n\n\tcloseKeyboard() {\n\t\t$(':focus').blur();\n\t\t// if (typeof cordova !== 'undefined' && cordova.plugins && cordova.plugins.Keyboard)\n\t\t// \tcordova.plugins.Keyboard.close();\n\t}\n\n\t//\n\t// Events\n\t//\n\n\tonBeforeDeactivate() {\n\t\tthis.closeKeyboard();\n\t}\n\n\tonDeactivate() {\n\t\tthis.closeKeyboard();\n\t\tthis.$el.addClass('deactivate');\n\t\tthis.isActive = false;\n\t\tlet state = this.getState();\n\t\tif (state) state.trigger('deactivated');\n\t}\n\n\tonBeforeActivate() {\n\t\tthis.closeKeyboard();\n\t}\n\n\tonActivate(firstTime) {\n\t\tthis.closeKeyboard();\n\t\tthis.$el.removeClass('deactivate');\n\t\tthis.isActive = true;\n\t\tlet state = this.getState();\n\t\tif (state) state.trigger('activated');\n\t}\n\n\tonDestroy() {\n\t\tif (this.renderingTimeoutHandler) {\n\t\t\tclearTimeout(this.renderingTimeoutHandler);\n\t\t}\n\n\t\tthis.el.removeEventListener( 'touchstart',  this.onSwipeBackTouchStart );\n\n\t\tdocument.removeEventListener('touchmove',   this.onSwipeBackTouchMove );\n\t\tdocument.removeEventListener('touchend',    this.onSwipeBackTouchEnd  );\n\t\tdocument.removeEventListener('touchcancel', this.onSwipeBackTouchEnd  );\n\n\t\tsuper.onDestroy();\n\t}\n\n\tonBeforePop() {\n\t\tthis.pageStatus = STATUS_MOVING;\n\t\tif (this.options.animated === true) {\n\t\t\twindow.requestAnimationFrame(()=>{\n\t\t\t\tthis.move(0, 4, true);\n\t\t\t});\n\t\t}\n\t}\n\n\tonSwipeBackTouchStart(ev) {\n\t\tif (!ev || !ev.timeStamp || !this.isActive ) return;\n\n\t\tlet top     = this.options.swipeBackBoundaryTop;\n\t\tlet left    = this.options.swipeBackBoundaryLeft;\n\t\tlet width   = this.options.swipeBackBoundaryWidth;\n\t\tlet height  = this.options.swipeBackBoundaryHeight;\n\t\tlet pageX   = this._swipeBackStartX = getPageX( ev );\n\t\tlet pageY   = this._swipeBackStartY = getPageY( ev );\n\n\t\tthis._swipeBackMoveDirection = null;\n\n\t\tif ( isInRect( pageX, pageY, top, left, width, height ) && this.viewport.width > 0 && !this._swipeBackStop ){\n\n\t\t\tthis.pageStatus = STATUS_MOVING;\n\n\t\t\tdocument.addEventListener('touchmove',   this.onSwipeBackTouchMove );\n\t\t\tdocument.addEventListener('touchend',    this.onSwipeBackTouchEnd );\n\t\t\tdocument.addEventListener('touchcancel', this.onSwipeBackTouchEnd );\n\n\t\t\tthis.el.style[ getVendorStyle('transition') ] = '';\n\t\t\tthis.$el.addClass( this.options.swipeBackClassName );\n\n\t\t\tthis._swipeBackDeltaScreenX  = pageX;\n\t\t\tthis._swipeBackDeltaScreenY  = pageY;\n\t\t\tthis._swipeBackStop          = true;\n\t\t\tthis._swipeBackStartTime     = ev.timeStamp;\n\n\t\t}\n\t}\n\n\tonSwipeBackTouchEnd(ev){\n\t\tif (!ev || !ev.timeStamp || !this.isActive ) return;\n\n\t\tthis.pageStatus = STATUS_NORMAL;\n\n\t\tlet ctx               = context;\n\t\tlet navigation        = this.getNavigationView();\n\t\tlet pageX             = getPageX(ev);\n\t\tlet pageY             = getPageY(ev);\n\t\tlet pop               = false;\n\t\tlet currentDirection  = this._swipeBackMoveDirection;\n\t\tlet viewstack         = this.viewstack;\n\t\tlet removeTouchEvents = () => {\n\t\t\tdocument.removeEventListener('touchmove',   this.onSwipeBackTouchMove );\n\t\t\tdocument.removeEventListener('touchend',    this.onSwipeBackTouchEnd  );\n\t\t\tdocument.removeEventListener('touchcancel', this.onSwipeBackTouchEnd  );\n\t\t};\n\n\t\tthis._swipeBackMoveDirection = null;\n\n\t\tvar distance = pageX - this._swipeBackDeltaScreenX;\n\t\tvar time     = ev.timeStamp - this._swipeBackStartTime;\n\t\tvar speed    = Math.abs(distance) / time || 0.1;\n\n\t\tif ( speed >= this.options.swipeBackVelocityLimit || pageX > (this.viewport.width/2) ){\n\t\t\tpop = true;\n\t\t\tnavigationOnSwipeBack( 0 );\n\t\t}else{\n\t\t\tnavigationOnSwipeBack( 100 );\n\n\t\t\tthis.el.style[ getVendorStyle('transition') ] = 'transform '+this.options.duration+'ms';\n\t\t\ttranslate3d( this.el, 0, 0, 0 );\n\t\t}\n\n\t\tremoveTouchEvents();\n\n\t\tif ( pop &&  this.viewstack )\n\t\t\tthis.viewstack.popView(this, {animated: true, delay: true});\n\n\t\tsetTimeout(() => {\n\t\t\tthis.el.style[ getVendorStyle('transition') ] = '';\n\t\t\tthis._swipeBackStop = false;\n\t\t\tthis.$el.removeClass(this.options.swipeBackClassName);\n\t\t}, this.options.duration);\n\n\n\t\tfunction navigationOnSwipeBack(percent){\n\t\t\tif ( navigation && navigation.onSwipeBack )\n\t\t\t\tnavigation.onSwipeBack( percent, true );\n\t\t\tif ( viewstack )\n\t\t\t\tviewstack.onSwipeBack( percent, true );\n\t\t};\n\n\t}\n\n\tonSwipeBackTouchMove(ev){\n\t\tlet ctx        = context;\n\t\tlet navigation = this.getNavigationView();\n\t\tlet pageX      = getPageX(ev) - this._swipeBackDeltaScreenX;\n\t\tlet pageY      = getPageY(ev) - this._swipeBackDeltaScreenY;\n\t\tlet percent    = 0;\n\t\tif ( pageX < 0 )\n\t\t\tpageX = 0;\n\t\telse if ( pageX > this.viewport.width )\n\t\t\tpageX = this.viewport.width;\n\t\tif ( pageY < 0 )\n\t\t\tpageY = 0;\n\t\telse if ( pageY > this.viewport.height )\n\t\t\tpageY = this.viewport.height;\n\n\n\t\t// Check direction\n\t\tif ( this.options.swipeBackDirection === 'horizontal' && (pageX === 0 || this._swipeBackMoveDirection === 'vertical') ){\n\t\t\tthis._swipeBackMoveDirection = 'vertical';\n\t\t\treturn;\n\t\t}else if ( this.options.swipeBackDirection === 'vertical' && (pageY === 0 || this._swipeBackMoveDirection === 'horizontal') ){\n\t\t\tthis._swipeBackMoveDirection = 'horizontal';\n\t\t\treturn;\n\t\t}\n\n\t\t// Stop propagation event\n\t\tev.stopPropagation();\n\t\t// ev.preventDefault();\n\n\t\tif ( this.viewport.width > 0 )\n\t\t\tpercent = 100 - Math.round(pageX * 100 / this.viewport.width * 10) / 10;\n\n\t\tif ( navigation && navigation.onSwipeBack )\n\t\t\tnavigation.onSwipeBack( percent, false );\n\n\t\t// Viewstack\n\t\tif ( this.viewstack )\n\t\t\tthis.viewstack.onSwipeBack( percent, false );\n\n\t\ttranslate3d( this.el, pageX, 0, 0 );\n\n\t\treturn false;\n\t}\n\n\tmove(percent, direction, animated) {\n\t\tswitch (this.options.pageAnimation) {\n\t\t\tcase ANIMATION_PUSH_LEFT:\n\t\t\t\tthis.movePushLeft(percent, direction, animated);\n\t\t\t\tbreak;\n\t\t\tcase ANIMATION_ZOOM_IN:\n\t\t\t\tthis.moveZoomIn(percent, direction, animated);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tmovePushLeft(percent, direction, animated) {\n\t\tlet self          = this;\n\t\tlet transform     = '';\n\t\tlet initTransform = '';\n\n\t\tswitch (direction) {\n\t\t\tcase BarView.PUSH:\n\t\t\t\tinitTransform = 'translate3d(100%, 0, 0)';\n\t\t\t\ttransform = 'translate3d(0,0,0)';\n\t\t\t\tbreak;\n\t\t\tcase BarView.DETACH:\n\t\t\t\tinitTransform = 'translate3d(0, 0, 0)';\n\t\t\t\ttransform = 'translate3d('+(-50*(percent/100))+'%, 0, 0)';\n\t\t\t\tbreak;\n\t\t\tbreak;\n\t\t\tcase BarView.RESTORE:\n\t\t\t\tinitTransform = 'translate3d('+(-50*(percent/100))+'%, 0, 0)';\n\t\t\t\ttransform = 'translate3d(0, 0, 0)';\n\t\t\t\tbreak;\n\t\t\tcase BarView.POP:\n\t\t\t\tinitTransform = null;\n\t\t\t\ttransform = 'translate3d(100%, 0, 0)';\n\t\t\t\tbreak;\n\t\t}\n\n\t\tlet el = this.el;\n\t\tel.style[ getVendorStyle('transition') ]  = '';\n\n\t\tif ( animated ){\n\t\t\tif (this._oldPercent !== -1) {\n\t\t\t\tinitTransform = null;\n\t\t\t}\n\n\t\t\tanimate(el, {\n\t\t\t\tduration: this.options.duration + 'ms',\n\t\t\t\ttiming: 'ease-out',\n\t\t\t\tstart: {\n\t\t\t\t\t'transform': initTransform\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\t'transform': transform\n\t\t\t\t}\n\t\t\t});\n\n\t\t} else {\n\t\t\tthis._oldPercent = percent;\n\t\t\tel.style[ getVendorStyle('transform') ] = transform;\n\t\t}\n\t}\n\n\tmoveZoomIn(percent, direction, animated) {\n\t\tlet self          = this;\n\t\tlet transform     = '';\n\t\tlet opacity       = 1;\n\t\tlet initTransform = '';\n\t\tlet initOpacity   = 0;\n\n\t\t// let easingIn  = BezierEasing(.01,.69,.36,1);\n\t\tlet easingOut = BezierEasing(.81,.09,.1,.6);\n\n\t\tswitch (direction) {\n\t\t\tcase BarView.PUSH:\n\t\t\t\tinitTransform = 'scale(0.9)';\n\t\t\t\ttransform     = 'scale(1)';\n\t\t\t\tinitOpacity   = 0;\n\t\t\t\topacity       = 1;\n\t\t\t\tbreak;\n\t\t\tcase BarView.DETACH:\n\t\t\t\tinitTransform = 'scale(1)';\n\t\t\t\ttransform     = 'scale(0.9)';\n\t\t\t\tinitOpacity   = 1;\n\t\t\t\topacity       = 0;\n\t\t\t\tbreak;\n\t\t\tcase BarView.RESTORE:\n\t\t\t\tinitTransform = 'scale(0.9)';\n\t\t\t\ttransform = 'scale(1)';\n\t\t\t\tinitOpacity   = 0;\n\t\t\t\topacity       = 1;\n\t\t\t\tbreak;\n\t\t\tcase BarView.POP:\n\t\t\t\tinitTransform = 'scale(1)';\n\t\t\t\ttransform = 'scale(0.8)';\n\t\t\t\tinitOpacity   = 1;\n\t\t\t\topacity       = 0;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tlet el = this.el;\n\t\tel.style[ getVendorStyle('transition') ]  = '';\n\n\t\tif ( animated ){\n\t\t\tif (this._oldPercent !== -1) {\n\t\t\t\tinitTransform = null;\n\t\t\t}\n\n\t\t\tanimate(el, {\n\t\t\t\tduration: this.options.duration + 'ms',\n\t\t\t\ttiming: 'ease-out',\n\t\t\t\tstart: {\n\t\t\t\t\t'transform': initTransform,\n\t\t\t\t\t'opacity': initOpacity\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\t'transform': transform,\n\t\t\t\t\t'opacity': opacity\n\t\t\t\t}\n\t\t\t});\n\n\t\t} else {\n\t\t\tthis._oldPercent = percent;\n\t\t\tel.style.opacity = easingOut(percent / 100);\n\t\t\tel.style[ getVendorStyle('transform') ] = transform;\n\t\t}\n\t}\n\n};\n\nPageView.ANIMATION_PUSH_LEFT = ANIMATION_PUSH_LEFT;\nPageView.ANIMATION_ZOOM_IN   = ANIMATION_ZOOM_IN;\n",
    "\nimport _ from \"underscore\";\nimport { getVendorStyle } from \"./style\";\n\n\nexport default function(el, animation, done){\n\n\tif (!_.isObject(animation))\n\t\tthrow new Error('animation is required');\n\n\tif (!_.isObject(animation.start))\n\t\tthrow new Error('animation.start is required');\n\n\tif (!_.isObject(animation.end))\n\t\tthrow new Error('animation.end is required');\n\n\t_.defaults(animation, {\n\t\tduration: '300ms',\n\t\ttiming: ''\n\t});\n\n\tvar properties = _.keys(animation.start);\n\n\t// Empty transition property. We don't want animation for initial state.\n\tvar transitionProperty = getVendorStyle('transition');\n\tvar timingProperty     = getVendorStyle('transition-timing-function');\n\tel.style[transitionProperty] = '';\n\tel.style[timingProperty]     = '';\n\n\t// Set the start state\n\tvar transition = '';\n\tvar aProperty;\n\tfor (var i = 0, n = properties.length; i < n; i++) {\n\t\taProperty = properties[i];\n\n\t\tif (animation.start[aProperty] !== null && animation.start[aProperty] !== undefined)\n\t\t\tel.style[getVendorStyle(aProperty)] = animation.start[aProperty];\n\n\t\t// Build the transition string\n\t\ttransition += getVendorStyle(aProperty) + ' ' + animation.duration;\n\t\tif (i < n - 1)\n\t\t\ttransition += ', ';\n\t}\n\n\t// Ensure to apply the initial state\n\twindow.getComputedStyle(el)[transitionProperty];\n\n\t// Set the transition property to animate the element\n\tel.style[transitionProperty] = transition;\n\tel.style[timingProperty]     = animation.timing;\n\n\twindow.requestNextAnimationFrame(function(){\n\t\tfor (var i = 0, n = properties.length; i < n; i++) {\n\t\t\taProperty = properties[i];\n\t\t\tel.style[getVendorStyle(aProperty)] = animation.end[aProperty];\n\t\t}\n\t\tif (_.isFunction(done)){\n\t\t\tif (!animation.duration)\n\t\t\t\treturn done();\n\n\t\t\tlet duration = animation.duration.match(/\\d+/);\n\t\t\tif ( _.isArray(duration) && duration.length == 0 )\n\t\t\t\treturn done();\n\n\t\t\tsetTimeout(()=>{\n\t\t\t\tdone();\n\t\t\t}, duration[0]);\n\t\t}\n\n\t});\n\n};\n",
    "/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\nfunction B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\nfunction C (aA1)      { return 3.0 * aA1; }\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT; }\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1); }\n\nfunction binarySubdivide (aX, aA, aB, mX1, mX2) {\n  var currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n   var currentSlope = getSlope(aGuessT, mX1, mX2);\n   if (currentSlope === 0.0) {\n     return aGuessT;\n   }\n   var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n   aGuessT -= currentX / currentSlope;\n }\n return aGuessT;\n}\n\nmodule.exports = function bezier (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  if (mX1 !== mY1 || mX2 !== mY2) {\n    for (var i = 0; i < kSplineTableSize; ++i) {\n      sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  function getTForX (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing (x) {\n    if (mX1 === mY1 && mX2 === mY2) {\n      return x; // linear\n    }\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n",
    "\nimport _        from \"underscore\";\nimport BaseView from \"../BaseView\";\n\nconst PUSH    = 0; // Push      | |<-\nconst DETACH  = 1; // Detach  <-| |\nconst RESTORE = 2; // Restore ->| |\nconst POP     = 4; // Pop       | |->\n\nexport default class BarView extends BaseView {\n\n\tclassName() { return 'ui-navigation-bar'; }\n\n\tconstructor(options) {\n\t\tsuper(options);\n\t\tthis.setDefaultsOptions({ duration: 300, className: '' });\n\t}\n\n\tmove(percent, direction, animated){\n\t\treturn this;\n\t}\n\n};\n\n\nBarView.PUSH    = PUSH;\nBarView.DETACH  = DETACH;\nBarView.RESTORE = RESTORE;\nBarView.POP     = POP;\n",
    "import _ from 'underscore';\nimport $ from 'jquery';\nimport ListView from '../../lib/listviews/ListView';\nimport ListItemView from '../../lib/listviews/ListItemView';\nimport ImageView from '../../lib/ImageView';\nimport { getVendorStyle } from '../../lib/utils/style';\nimport ModelA from './models/ModelA';\nimport ModelB from './models/ModelB';\nimport ModelC from './models/ModelC';\n\nclass CellA extends ListItemView {\n\tstatic getSize(options) {\n\t\treturn 100;\n\t}\n\tclassName() { return 'cellA' }\n\tonRender(rendered) {\n\t\tif (!rendered) {\n\t\t\tthis.cache.$text = $('<span>');\n\t\t\tthis.$el.append(this.cache.$text);\n\t\t}\n\t\tif (this.model) {\n\t\t\tthis.cache.$text.text(`CellA ${ this.model.id }`);\n\t\t} else {\n\t\t\tthis.cache.$text.text('');\n\t\t}\n\t}\n}\n\nclass CellB extends ListItemView {\n\tstatic getSize(options) {\n\t\treturn 200;\n\t}\n\tclassName() { return 'cellB' }\n\tonRender(rendered) {\n\t\tif (!rendered) {\n\t\t\tthis.cache.$text = $('<span>');\n\t\t\tthis.$el.append(this.cache.$text);\n\t\t}\n\t\tif (this.model) {\n\t\t\tthis.cache.$text.text(`CellB ${ this.model.id }`);\n\t\t} else {\n\t\t\tthis.cache.$text.text('');\n\t\t}\n\t}\n}\n\nclass CellC extends ListItemView {\n\tstatic getSize(options) {\n\t\treturn 300;\n\t}\n\tclassName() { return 'cellC' }\n\tconstructor(options) {\n\t\tsuper(options);\n\t\tconst imageView = new ImageView({\n\t\t\tsize: 'contain',\n\t\t\tautoload: false,\n\t\t\tviewport: { width: 100, height: 100 }\n\t\t});\n\t\timageView.el.style.width = 100;\n\t\timageView.el.style.height = 100;\n\t\tthis.addSubView('imageView', imageView);\n\t}\n\n\tonRender(rendered) {\n\t\tconst imageView = this.getSubView('imageView');\n\t\tif (!rendered) {\n\t\t\tthis.cache.$text = $('<span>');\n\t\t\tthis.$el.append(\n\t\t\t\timageView.el,\n\t\t\t\tthis.cache.$text\n\t\t\t);\n\t\t\timageView.render();\n\t\t}\n\t\tif (this.model) {\n\t\t\tthis.cache.$text.text(`CellC ${ this.model.id }`);\n\t\t\timageView.setSource(this.model.get('image'));\n\t\t\timageView.load();\n\t\t}\n\t\telse {\n\t\t\timageView.setSource(null);\n\t\t\tthis.cache.$text.text('');\n\t\t}\n\t}\n}\n\nclass ResizableListItemView extends ListItemView {\n\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tif (!this.options.contentTypes)\n\t\t\tthrow new Error('options.contentTypes is missing from ResizableListItemView');\n\n\t\tconst childrenOptions = {\n\t\t\tparentList: this.options.parentList\n\t\t};\n\n\t\tlet aNewView;\n\t\t_.forEach(this.options.contentTypes, (aContentType, anIndex) => {\n\t\t\taNewView = new aContentType.viewClass(childrenOptions);\n\t\t\tthis.addSubView(anIndex, aNewView);\n\t\t});\n\t}\n\n\tonRender(rendered) {\n\t\tif (!rendered) {\n\t\t\t_.forEach(this.views, (aView) => {\n\t\t\t\tthis.$el.append(aView.el);\n\t\t\t\taView.render();\n\t\t\t});\n\t\t}\n\n\t\tconst propertyToResize = this.options.parentList.isVertical() ? 'height' : 'width';\n\t\tlet aSubView;\n\t\t_.forEach(this.options.contentTypes, (aContentType, anIndex) => {\n\t\t\taSubView = this.getSubView(anIndex);\n\t\t\tif (this.model instanceof aContentType.modelClass) {\n\t\t\t\taSubView.el.style.opacity = 1;\n\t\t\t\tthis.el.style[propertyToResize] = aContentType.viewClass.getSize(this.model);\n\t\t\t} else {\n\t\t\t\taSubView.el.style.opacity = 0;\n\t\t\t}\n\t\t});\n\n\t\tif (!this.model) {\n\t\t\tthis.el.style.height = 0;\n\t\t}\n\t}\n\n\tsetModel(newModel) {\n\t\tlet aSubView;\n\t\t_.forEach(this.options.contentTypes, (aContentType, anIndex) => {\n\t\t\tif (newModel instanceof aContentType.modelClass) {\n\t\t\t\taSubView = this.getSubView(anIndex);\n\t\t\t\taSubView.setModel(newModel).render();\n\t\t\t}\n\t\t});\n\t\tsuper.setModel(newModel);\n\t}\n\n}\n\nexport default class DifferentSizeListView extends ListView {\n\n\tgetListItemViewAtIndexWithOptions(index, options) {\n\t\toptions = _.clone(options);\n\t\toptions.contentTypes = [\n\t\t\t{ modelClass: ModelA, viewClass: CellA },\n\t\t\t{ modelClass: ModelB, viewClass: CellB },\n\t\t\t{ modelClass: ModelC, viewClass: CellC }\n\t\t];\n\t\treturn new ResizableListItemView(options);\n\t}\n\n\tgetListItemSizeAtIntexWithOptions(index, options) {\n\t\tconst model = options.model;\n\t\tif (model instanceof ModelA)\n\t\t\treturn CellA.getSize(model);\n\t\telse if (model instanceof ModelB)\n\t\t\treturn CellB.getSize(model);\n\t\telse if (model instanceof ModelC)\n\t\t\treturn CellC.getSize(model);\n\t}\n\n\tonSelectItem(item, done) {\n\t\tif (item.view) {\n\t\t\tconsole.log(item.view.model.toJSON());\n\t\t}\n\t\treturn done();\n\t}\n\n}\n",
    "import _ from \"underscore\";\nimport $ from \"jquery\";\nimport context from \"context-utils\";\nimport { Collection } from \"backbone\";\nimport BaseView from \"../BaseView\";\nimport ListItemView from \"./ListItemView\";\nimport getContextOptions from \"../utils/getContextOptions\";\nimport { translate3d, overflowScrolling, getVendorStyle, transition } from \"../utils/style\";\n\nconst TOP_DOWN               = 1;\nconst DOWN_TOP               = 2;\nconst LEFT_RIGHT             = 4;\nconst RIGHT_LEFT             = 8;\nconst ORIENTATION_VERTICAL   = 'vertical';\nconst ORIENTATION_HORIZONTAL = 'horizontal';\n\nvar ticking = false;\nlet requestTick = function requestTick(callback) {\n\tif (!ticking) {\n\t\twindow.requestAnimationFrame(() => {\n\t\t\tticking = false;\n\t\t\tcallback();\n\t\t});\n\t}\n\tticking = true;\n}\n\nexport default class ListView extends BaseView {\n\n\tclassName() {\n\t\treturn 'ui-list-view ' + ( _.result(this, \"addClass\") || '' );\n\t}\n\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tthis.addEvents({\n\t\t\t'click': 'onClick', // _.debounce(this.onClick, 500, true),\n\t\t\t'scroll': 'onScroll',\n\t\t\t'touchstart': 'onTouchStart',\n\t\t\t'touchmove': 'onTouchMove',\n\t\t\t'touchend': 'onTouchEnd',\n\t\t\t'mousedown': 'onTouchStart',\n\t\t\t'mousemove': 'onTouchMove',\n\t\t\t'mouseup': 'onTouchEnd'\n\t\t});\n\n\t\tthis.setDefaultsOptions(getContextOptions('ListView'), {\n\t\t\titemClass: 'ui-list-item',\n\t\t\titemHeight: 120,\n\t\t\titemWidth: 120,\n\t\t\titemsPerRow: 1,\n\t\t\tplaceholders: 20, // Number of items\n\t\t\tplaceholderCache: 2,\n\t\t\torientation: ORIENTATION_VERTICAL,\n\t\t\tinfinite: false,\n\t\t\tinfiniteLoadingSize: 44,\n\t\t\tdistance: 100,\n\t\t\tpullToRefresh: false,\n\t\t\tpullToRefreshWithOverscroll: false,\n\t\t\tpullToRefreshSize: 60,\n\t\t\tpullToRefreshContent: 'Pull to refresh...',\n\t\t\tpullToRefreshClass: 'ui-pull-to-refresh',\n\t\t\ttouchActiveClassName: 'touch-active',\n\t\t\temptyText: '',\n\t\t\tdelayedRender: 0,\n\t\t\theaderView: null, // view to print on the header\n\t\t\theaderSize: 0, // height of the header in a vertical listview or width in an horizontal listview\n\t\t\tchangeDirectionPan: 50\n\t\t});\n\n\t\tthis.items = [];\n\t\tthis.rowItems = []; // [{ index: 1, from: 200, to: 300 }, ...]\n\t\tthis.rowPositions = []; // Cumulative position due to different sizes of items\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t\tthis.overscrollX = 0;\n\t\tthis.overscrollY = 0;\n\t\tthis.isOverscrolling = false;\n\t\tthis.previousX = 0;\n\t\tthis.previousY = 0;\n\t\tthis.offsetCalculated = false;\n\t\tthis.offsetX = 0;\n\t\tthis.offsetY = 0;\n\t\tthis.listWidth = 0;\n\t\tthis.listHeight = 0;\n\t\tthis.containerSize = 0;\n\t\tthis.rendered = false;\n\t\tthis.isLoadingMore = false;\n\t\tthis.isRefreshing = false;\n\t\tthis.isClicking = false;\n\t\tthis.activeItem = null;\n\t\tthis.touchX = 0;\n\t\tthis.touchY = 0;\n\t\tthis.touchStartedAtScollX = 0;\n\t\tthis.touchStartedAtScollY = 0;\n\t\tthis.direction = null;\n\t\tthis.previousDirection = null;\n\t\tthis.startChangeDirectionAt = null;\n\n\t\tthis.setCollection(this.collection);\n\n\t\tthis.onMove = _.bind(this.onMove, this);\n\t}\n\n\t//\n\t// Methods\n\t//\n\n\trender() {\n\t\tif (this.onRender) {\n\t\t\tif ( this.timeoutId )\n\t\t\t\tclearTimeout(this.timeoutId);\n\t\t\tif ( this.rafId )\n\t\t\t\tthis.cancelAnimationFrame(this.rafId);\n\n\t\t\tthis.timeoutId = setTimeout(() => {\n\t\t\t\tthis.timeoutId = null;\n\t\t\t\tthis.rafId = this.requestAnimationFrame(() => {\n\t\t\t\t\t// Pass to the onRender callback if the view is already rendered\n\t\t\t\t\tthis.onRender(this.rendered);\n\t\t\t\t\tthis.delegateEvents();\n\t\t\t\t\tthis.rendered = true;\n\t\t\t\t\tthis.rafId    = null;\n\t\t\t\t});\n\t\t\t}, this.options.delayedRender);\n\t\t}\n\t\telse {\n\t\t\tthis.rendered = true;\n\t\t}\n\t\treturn this;\n\t}\n\n\tonRender(rendered) {\n\t\tif (rendered) return this;\n\t\t// Prepare the content\n\t\tthis.$el\n\t\t\t.addClass('overflow-scroll')\n\t\t\t.addClass(this.options.orientation);\n\n\t\tthis.listWidth  = this.$el.width();\n\t\tthis.listHeight = this.$el.height();\n\t\toverflowScrolling(this.el, true, this.options.orientation); // Per Android e WK\n\n\t\t// Empty text\n\t\tthis.cache.$emptyText = $('<div class=\"empty\"></div>').text(this.options.emptyText).hide();\n\t\tif (!this.collection.fetching) {\n\t\t\tthis.sync();\n\t\t}\n\t\tthis.$el.append(this.cache.$emptyText);\n\n\t\t// Container\n\t\tlet $scrollContainer = this.cache.$scrollContainer = $('<div>');\n\t\tthis.resizeContainer();\n\n\t\tthis.requestAnimationFrame(() => {\n\t\t\tthis.$el.removeClass('overflow-scroll');\n\t\t\tthis.requestAnimationFrame(() => {\n\t\t\t\tthis.$el.addClass('overflow-scroll');\n\t\t\t});\n\t\t});\n\n\t\t// Preparo gli elementi vuoti\n\t\tvar anElement, anItem, aPosition, aXY;\n\t\tvar itemStyle = {\n\t\t\tposition: 'absolute',\n\t\t\ttop: 0,\n\t\t\tleft: 0\n\t\t};\n\t\tfor (var i = 0; i < this.options.placeholders; i++) {\n\t\t\tanElement = $('<div>').addClass(this.options.itemClass);\n\t\t\tanItem = {\n\t\t\t\tindex: i,\n\t\t\t\t$el: anElement\n\t\t\t};\n\t\t\taXY = this.getXYFromIndex(i);\n\t\t\tanItem.x = aXY.x;\n\t\t\tanItem.y = aXY.y;\n\n\t\t\tif (this.options.orientation === ORIENTATION_VERTICAL) {\n\t\t\t\titemStyle.width = ((this.listWidth / this.options.itemsPerRow) / this.listWidth) * 100 + '%';\n\t\t\t}\n\t\t\telse {\n\t\t\t\titemStyle.height = ((this.listHeight / this.options.itemsPerRow) / this.listHeight) * 100 + '%';\n\t\t\t}\n\n\t\t\tanElement.css(itemStyle);\n\n\t\t\tthis.updateContent(anItem, true);\n\t\t\tthis.items.push(anItem);\n\t\t\t$scrollContainer.append(anElement);\n\t\t}\n\n\t\tthis.$el.append($scrollContainer);\n\n\t\t// Header\n\t\tif (this.options.headerView && this.options.headerView instanceof BaseView) {\n\t\t\tthis.$el.prepend(this.options.headerView.el);\n\t\t\tthis.options.headerView.render();\n\t\t}\n\n\t\t// Pull to refresh\n\t\tif (this.options.pullToRefresh) {\n\t\t\tlet $pullToRefresh = this.cache.$pullToRefresh = $('<div>').addClass(this.options.pullToRefreshClass);\n\t\t\t$pullToRefresh.css({\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\t'margin-top': `-${this.options.pullToRefreshSize}px`,\n\t\t\t});\n\n\t\t\t// Check if this.options.pullToRefreshContent is a BaseView or not\n\t\t\tif (this.options.pullToRefreshContent instanceof BaseView) {\n\t\t\t\t$pullToRefresh.append(this.options.pullToRefreshContent.el);\n\t\t\t\tthis.options.pullToRefreshContent.render();\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$pullToRefresh.append(this.options.pullToRefreshContent);\n\t\t\t}\n\n\t\t\tthis.$el.prepend($pullToRefresh);\n\t\t}\n\t}\n\n\tupdateContent(item, immediate) {\n\t\t// Aggiorna il contenuto\n\t\tvar model = this.collection.at(item.index);\n\t\tif (!item.view && model) {\n\n\t\t\t// if (!('getListItemViewAtIndexWithOptions' in this))\n\t\t\t// \tthrow new Error('Method getListItemViewAtIndexWithOptions not implemented');\n\n\t\t\titem.view = this.getListItemViewAtIndexWithOptions(item.index, {\n\t\t\t\tel: item.$el.get(0),\n\t\t\t\tmodel: model,\n\t\t\t\tstate: this.getState(),\n\t\t\t\tparentList: this,\n\t\t\t\tremoveOnDestroy: true\n\t\t\t});\n\t\t}\n\n\t\t// Render\n\t\tif (item.view) {\n\t\t\titem.view.setModel(model);\n\t\t\titem.view.render();\n\t\t}\n\n\t\t// Riposiziona l'elemento\n\t\tlet position = this.getPositionAtIndex(item.index);\n\t\tlet xy = this.getXYFromIndex(item.index);\n\t\titem.x = xy.x;\n\t\titem.y = xy.y;\n\t\tthis.requestAnimationFrame(() => {\n\t\t\tfor (var c = 0; c < this.options.itemsPerRow; c++) {\n\t\t\t\tif (position.column !== c)\n\t\t\t\t\titem.$el.removeClass('col-' + c);\n\t\t\t}\n\t\t\titem.$el.addClass('col-' + position.column);\n\t\t});\n\t\ttranslate3d(item.$el, item.x, item.y, 0, immediate);\n\t}\n\n\tupdateRangeContents(startIndex, endIndex, forceUpdate) {\n\t\tvar anItem;\n\n\t\tstartIndex = startIndex - this.options.placeholderCache;\n\t\tif (startIndex < 0) startIndex = 0;\n\n\t\tendIndex = endIndex + this.options.placeholderCache;\n\t\tif (endIndex > this.getItemsCount()) endIndex = this.getItemsCount();\n\n\t\tfor (var i = startIndex; i < endIndex; i++) {\n\t\t\tanItem = this.getItemAtIndex(i);\n\t\t\tif (anItem.index !== i || forceUpdate) {\n\t\t\t\tanItem.index = i;\n\t\t\t\tthis.updateContent(anItem);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateAllContents() {\n\t\tvar anItem;\n\n\t\tfor (var i = 0; i < this.options.placeholders; i++) {\n\t\t\tanItem = this.items[i];\n\t\t\tthis.updateContent(anItem);\n\t\t}\n\t}\n\n\tresizeContainer() {\n\t\tthis.listWidth   = this.$el.width();\n\t\tthis.listHeight  = this.$el.height();\n\n\t\tif (this.cache.$scrollContainer) {\n\t\t\tlet containerStyle = {\n\t\t\t\tposition: 'relative',\n\t\t\t\toverflow: 'visible'\n\t\t\t};\n\t\t\t// Calculate the size of every item and get his position\n\t\t\tthis.calculateRowPosition();\n\n\t\t\t// Check if the number of elements is less then then amount of\n\t\t\t// placeholder. This prevent the list from scrolling more then\n\t\t\t// then real number of items.\n\t\t\tif (this.getCollection().length < this.options.placeholders) {\n\t\t\t\tcontainerStyle.overflow = 'hidden';\n\t\t\t}\n\n\t\t\tif (this.options.orientation === ORIENTATION_VERTICAL) {\n\t\t\t\tcontainerStyle.height = this.containerSize + 'px';\n\t\t\t\tcontainerStyle.width = '100%';\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcontainerStyle.height = '100%';\n\t\t\t\tcontainerStyle.width = this.containerSize + 'px';\n\t\t\t}\n\n\t\t\tthis.cache.$scrollContainer.css(containerStyle);\n\t\t}\n\t}\n\n\tpause() {\n\t\toverflowScrolling(this.el, false, this.options.orientation);\n\t\treturn this;\n\t}\n\n\tresume() {\n\t\toverflowScrolling(this.el, true, this.options.orientation);\n\t\treturn this;\n\t}\n\n\treset() {\n\t\tthis.onReset();\n\t}\n\n\tsync() {\n\t\tthis.onSync();\n\t}\n\n\tgetListItemViewAtIndexWithOptions(index, options) {\n\t\treturn new ListItemView(options);\n\t}\n\n\tsetCollection(collection) {\n\t\tif (this.collection) {\n\t\t\tthis.stopListening(this.collection);\n\t\t}\n\n\t\tif (!collection) {\n\t\t\tthis.collection = null;\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(collection instanceof Collection))\n\t\t\tcollection = new Collection(collection);\n\n\t\tthis.collection = collection;\n\n\t\tthis.listenTo(this.collection, 'sync',   this.onSync);\n\t\tthis.listenTo(this.collection, 'reset',  this.onReset);\n\t\tthis.listenTo(this.collection, 'sort',   this.onSort);\n\t\tthis.listenTo(this.collection, 'add',    _.debounce(_.bind(this.onAdd, this)));\n\t\tthis.listenTo(this.collection, 'remove', _.debounce(_.bind(this.onRemove, this)));\n\n\t\t// Reset\n\t\tthis.reset();\n\t}\n\n\trefresh() {\n\t\tif (this.isRefreshing) return;\n\t\tif (typeof this.onRefresh == 'function') {\n\t\t\tthis.isRefreshing = true;\n\n\t\t\tthis.showPullToRefresh();\n\n\t\t\t// Stops the scroll\n\t\t\tthis.pause();\n\n\t\t\tif (this.options.pullToRefreshContent instanceof BaseView && 'onRefreshStart' in this.options.pullToRefreshContent) {\n\t\t\t\tthis.options.pullToRefreshContent.onRefreshStart();\n\t\t\t}\n\n\t\t\tthis.onRefresh((successfully) => {\n\t\t\t\tif (this.options.pullToRefreshContent instanceof BaseView && 'onRefreshComplete' in this.options.pullToRefreshContent) {\n\t\t\t\t\tthis.options.pullToRefreshContent.onRefreshComplete(successfully || successfully === void 0);\n\t\t\t\t}\n\t\t\t\tthis.isRefreshing = false;\n\t\t\t\tthis.resume();\n\t\t\t\tthis.hidePullToRefresh();\n\t\t\t});\n\t\t}\n\t}\n\n\tupdatePullToRefreshOverscrollPosition() {\n\t\tthis.cache.$pullToRefresh.get(0).style[getVendorStyle('transition')] = '';\n\t\tif (this.options.orientation === ORIENTATION_VERTICAL) {\n\t\t\tlet translateY = this.overscrollY;\n\t\t\t// Add some friction\n\t\t\tif (translateY > 100)\n\t\t\t\ttranslateY = Math.sqrt(100 * translateY);\n\t\t\t\t// translateY = 50 * Math.log10(translateY);\n\t\t\ttranslate3d(this.cache.$pullToRefresh, 0, translateY, 0);\n\t\t}\n\t\telse {\n\t\t\tlet translateX = this.overscrollX;\n\t\t\t// Add some friction\n\t\t\tif (translateX > 100)\n\t\t\t\ttranslateX = Math.sqrt(100 * translateX);\n\t\t\t\t// translateX = 50 * Math.log10(translateX);\n\t\t\ttranslate3d(this.cache.$pullToRefresh, 0, this.overscrollX, 0);\n\t\t}\n\t}\n\n\tshowPullToRefresh() {\n\t\t// If overscroll is disabled we don't want animation on pull to refresh view\n\t\tif (this.options.pullToRefreshWithOverscroll)\n\t\t\ttransition(this.cache.$pullToRefresh, 'transform 300ms ease-out');\n\t\telse\n\t\t\ttransition(this.cache.$pullToRefresh, '');\n\n\t\ttranslate3d(this.cache.$pullToRefresh, 0, this.options.pullToRefreshSize, 0);\n\t\tif (!this.options.pullToRefreshWithOverscroll) {\n\t\t\ttransition(this.cache.$scrollContainer, '');\n\t\t\ttranslate3d(this.cache.$scrollContainer, 0, this.options.pullToRefreshSize, 0);\n\t\t}\n\t}\n\n\thidePullToRefresh() {\n\t\tsetTimeout(() => {\n\t\t\ttransition(this.cache.$pullToRefresh, 'transform 300ms ease-out');\n\t\t\ttranslate3d(this.cache.$pullToRefresh, 0, 0, 0);\n\t\t\tif (!this.options.pullToRefreshWithOverscroll) {\n\t\t\t\ttransition(this.cache.$scrollContainer, 'transform 300ms ease-out');\n\t\t\t\ttranslate3d(this.cache.$scrollContainer, 0, 0, 0);\n\t\t\t}\n\t\t}, 300);\n\t}\n\n\tsetItemsPerRow(newItemsPerRow) {\n\t\tif (newItemsPerRow != this.options.itemsPerRow) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tlet oldItemsPerRow = this.options.itemsPerRow;\n\t\t\t\tlet startIndex;\n\t\t\t\tlet newStartItemPosition;\n\t\t\t\tlet oldStartItemPosition;\n\t\t\t\tlet scrollDelta;\n\t\t\t\tlet scrollTo;\n\t\t\t\tlet itemStyle = {};\n\n\t\t\t\tstartIndex = this.getStartIndex();\n\t\t\t\t// Calculate current/old position\n\t\t\t\toldStartItemPosition = this.getPositionAtIndex(startIndex);\n\t\t\t\t// Change itemsPerRow option\n\t\t\t\tthis.options.itemsPerRow = newItemsPerRow;\n\t\t\t\t// Resize the container\n\t\t\t\tthis.resizeContainer();\n\t\t\t\t// Calculate new position\n\t\t\t\tnewStartItemPosition = this.getPositionAtIndex(startIndex);\n\n\t\t\t\tif (this.options.orientation === ORIENTATION_VERTICAL) {\n\t\t\t\t\titemStyle.width = ((this.listWidth / this.options.itemsPerRow) / this.listWidth) * 100 + '%';\n\t\t\t\t\tscrollDelta = oldStartItemPosition.row * this.options.itemHeight + this.y;\n\t\t\t\t\tscrollTo = newStartItemPosition.row * this.options.itemHeight - scrollDelta;\n\t\t\t\t\tthis.el.scrollTop = scrollTo;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\titemStyle.height = ((this.listHeight / this.options.itemsPerRow) / this.listHeight) * 100 + '%';\n\t\t\t\t\tscrollDelta = oldStartItemPosition.row * this.options.itemWidth + this.x;\n\t\t\t\t\tscrollTo = newStartItemPosition.row * this.options.itemWidth - scrollDelta;\n\t\t\t\t\tthis.el.scrollLeft = scrollTo;\n\t\t\t\t}\n\n\t\t\t\t// Resize all items\n\t\t\t\tfor (var i = 0; i < this.items.length; i++) {\n\t\t\t\t\tthis.items[i].$el.css(itemStyle);\n\t\t\t\t\tfor (var c = 0; c < oldItemsPerRow; c++) {\n\t\t\t\t\t\tthis.items[i].$el.removeClass('col-' + c);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.updateAllContents();\n\t\t\t}, 100);\n\t\t}\n\t}\n\n\tgetCollection() {\n\t\treturn this.collection;\n\t}\n\n\tloadMore() {\n\t\tif (this.isLoadingMore) return;\n\n\t\tif ('onLoadMore' in this && this.shouldLoadMore()) {\n\t\t\tthis.isLoadingMore = true;\n\t\t\t// TODO: mostrare lo spinner\n\t\t\tthis.onLoadMore(() => {\n\t\t\t\tthis.isLoadingMore = false;\n\t\t\t});\n\t\t}\n\t}\n\n\tshouldLoadMore() {\n\t\treturn true;\n\t}\n\n\tscrollTop(animated) {\n\t\t// TODO: animate scroll\n\t\tthis.pause();\n\t\tthis.el.scrollTop = 0;\n\t\t// Trigger change:direction when user taps the status bar\n\t\tthis.direction = DOWN_TOP;\n\t\tif (this.direction != this.previousDirection) {\n\t\t\tthis.trigger('change:direction', this.direction);\n\t\t\tthis.previousDirection = this.direction;\n\t\t}\n\t\tthis.resume();\n\t}\n\n\tisVertical() {\n\t\treturn this.options.orientation === ORIENTATION_VERTICAL;\n\t}\n\n\t//\n\t// Events\n\t//\n\n\tonScroll(ev) {\n\t\trequestTick(this.onMove);\n\t}\n\n\tonMove() {\n\t\tlet startIndex;\n\t\tlet endIndex;\n\n\t\tif (this.options.orientation === ORIENTATION_VERTICAL) {\n\t\t\tlet y = this.y = -this.el.scrollTop;\n\t\t\tthis.direction = y < this.previousY ? TOP_DOWN : DOWN_TOP;\n\t\t\tif (this.direction != this.previousDirection && y < 0) {\n\t\t\t\tthis.startChangeDirectionAt = y;\n\t\t\t\tthis.previousDirection = this.direction;\n\t\t\t}\n\n\t\t\tif (this.startChangeDirectionAt !== null && Math.abs(this.startChangeDirectionAt - y) > this.options.changeDirectionPan) {\n\t\t\t\tthis.startChangeDirectionAt = null;\n\t\t\t\tthis.trigger('change:direction', this.direction);\n\t\t\t}\n\n\t\t\tthis.previousY = y;\n\t\t\tstartIndex = this.getStartIndex();\n\t\t\tendIndex   = this.getEndIndex();\n\n\t\t\tif (this.options.infinite) {\n\t\t\t\tif (this.containerSize - this.listHeight - this.options.distance < -y) {\n\t\t\t\t\tthis.loadMore();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tlet x = this.x = -this.el.scrollLeft;\n\t\t\tthis.direction = x < this.previousX ? LEFT_RIGHT : RIGHT_LEFT;\n\t\t\tif (this.direction != this.previousDirection && x < 0) {\n\t\t\t\tthis.trigger('change:direction', this.direction);\n\t\t\t\tthis.previousDirection = this.direction;\n\t\t\t}\n\t\t\tthis.previousX = x;\n\t\t\tstartIndex = this.getStartIndex();\n\t\t\tendIndex   = this.getEndIndex();\n\n\t\t\tif (this.options.infinite) {\n\t\t\t\tif (this.containerSize - this.listWidth - this.options.distance < -x) {\n\t\t\t\t\tthis.loadMore();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.updateRangeContents(startIndex, endIndex);\n\t}\n\n\tonTouchStart(e) {\n\t\tif ((this.isClicking || this.isRefreshing || this.activeItem) && e.editable)\n\t\t\treturn;\n\n\t\tthis.touchStartedAtScrollX = this.x;\n\t\tthis.touchStartedAtScrollY = this.y;\n\n\t\tif ('onSelectItem' in this) {\n\t\t\tlet event = this.normalizeEvent(e);\n\t\t\tlet x     = -event.x + this.x;\n\t\t\tlet y     = -event.y + this.y;\n\t\t\tlet item  = this.getItemFromXY(x, y);\n\t\t\tthis.touchX = event.x;\n\t\t\tthis.touchY = event.y;\n\t\t\tif (item && item.view) {\n\t\t\t\tthis.activeItem = item;\n\t\t\t\twindow.requestAnimationFrame(() => {\n\t\t\t\t\tif (this.activeItem)\n\t\t\t\t\t\tthis.activeItem.view.$el.addClass(this.options.touchActiveClassName);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tonTouchMove(e) {\n\t\tif ((this.isOverscrolling || this.isRefreshing) && e.cancelable) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t}\n\t\tlet event  = this.normalizeEvent(e);\n\t\tlet deltaX = Math.abs(this.touchX - event.x);\n\t\tlet deltaY = Math.abs(this.touchY - event.y);\n\t\tif (this.activeItem && (deltaX > 20 || deltaY > 20)) {\n\t\t\twindow.requestAnimationFrame(() => {\n\t\t\t\tif (this.activeItem) {\n\t\t\t\t\tthis.activeItem.view.$el.removeClass(this.options.touchActiveClassName);\n\t\t\t\t\tthis.activeItem = null;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// Overscroll\n\t\tif (this.options.pullToRefresh && this.options.pullToRefreshWithOverscroll && !this.isRefreshing) {\n\t\t\tif (this.y === 0) {\n\t\t\t\tthis.overscrollY = event.y - this.touchY + this.touchStartedAtScrollY;\n\t\t\t\tthis.updatePullToRefreshOverscrollPosition();\n\t\t\t\tif (this.overscrollY >= 10) {\n\t\t\t\t\tthis.isOverscrolling = true;\n\t\t\t\t}\n\t\t\t\t// console.log('y:%s ty:%s oy:%s overscrolling:%s', this.y, this.touchY, this.overscrollY, this.isOverscrolling);\n\t\t\t}\n\t\t\telse if (this.x === 0) {\n\t\t\t\tthis.overscrollX = event.x - this.touchX + this.touchStartedAtScrollX;\n\t\t\t\tthis.updatePullToRefreshOverscrollPosition();\n\t\t\t\tif (this.overscrollX >= 10) {\n\t\t\t\t\tthis.isOverscrolling = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonTouchEnd(e) {\n\t\tthis.isOverscrolling = false;\n\n\t\t// Trigger refresh due to pullToRefresh\n\t\tif (this.options.pullToRefresh && !this.isRefreshing) {\n\t\t\tif ((this.options.pullToRefreshWithOverscroll && this.overscrollY > this.options.pullToRefreshSize * 2)\n\t\t\t\t|| (!this.options.pullToRefreshWithOverscroll && this.y > this.options.pullToRefreshSize * 2)) {\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.hidePullToRefresh();\n\t\t\t}\n\t\t}\n\n\t\tif (this.activeItem) {\n\t\t\twindow.requestNextAnimationFrame(() => {\n\t\t\t\tif (this.activeItem) {\n\t\t\t\t\tthis.activeItem.view.$el.removeClass(this.options.touchActiveClassName);\n\t\t\t\t\tthis.activeItem = null;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tonClick(e) {\n\t\tif (this.isClicking || this.isRefreshing) return;\n\n\t\tif ('onSelectItem' in this) {\n\t\t\tlet event = this.normalizeEvent(e);\n\t\t\tlet x     = -event.x + this.x;\n\t\t\tlet y     = -event.y + this.y;\n\t\t\tlet item  = this.getItemFromXY(x, y);\n\n\t\t\t// To retreve an element from x,y\n\t\t\tlet element = document.elementFromPoint(event.pageX, event.pageY);\n\n\t\t\tif (item && item.view) {\n\t\t\t\tthis.isClicking = true;\n\t\t\t\tthis.onSelectItem({ view: item.view, element: element }, () => {\n\t\t\t\t\tthis.isClicking = false;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tonAdd(model) {\n\t\tif (this.rendered) {\n\t\t\tthis.resizeContainer();\n\t\t\t// let modelIndex = this.getCollection().indexOf(model);\n\t\t\tlet startIndex = this.getStartIndex();\n\t\t\tlet endIndex   = this.getEndIndex();\n\t\t\tthis.updateRangeContents(startIndex, endIndex, true);\n\t\t}\n\t}\n\n\tonRemove(model) {\n\t\tif (this.rendered) {\n\t\t\tthis.resizeContainer();\n\t\t\tthis.updateAllContents();\n\t\t}\n\t\tthis.sync();\n\t}\n\n\tonSync() {\n\t\tif (this.cache.$emptyText) {\n\t\t\t// Empty state\n\t\t\tif (this.collection.length === 0) {\n\t\t\t\tthis.cache.$emptyText.show();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.cache.$emptyText.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tonSort() {\n\t\tif (this.rendered) {\n\t\t\tthis.updateAllContents();\n\t\t}\n\t}\n\n\tonReset() {\n\t\tif (this.rendered) {\n\t\t\t// Reset item indexes\n\t\t\tfor (var i = 0, n = this.items.length; i < n; i++) {\n\t\t\t\tthis.items[i].index = i;\n\t\t\t}\n\t\t\twindow.requestAnimationFrame(() => {\n\t\t\t\t// Reset scroll\n\t\t\t\tthis.x = 0;\n\t\t\t\tthis.y = 0;\n\t\t\t\tthis.el.scrollTop = 0;\n\t\t\t\tthis.el.scrollLeft = 0;\n\t\t\t\t// Update container and content\n\t\t\t\tthis.resizeContainer();\n\t\t\t\tthis.updateAllContents();\n\t\t\t\tthis.pause();\n\t\t\t\twindow.requestAnimationFrame(() => {\n\t\t\t\t\tthis.resume();\n\t\t\t\t});\n\t\t\t\tthis.sync();\n\t\t\t});\n\t\t}\n\t}\n\n\tonDestroy() {\n\t\tvar anItem;\n\t\tfor (var i = 0; i < this.options.placeholders; i++) {\n\t\t\tanItem = this.items[i];\n\t\t\tif (anItem && anItem.view)\n\t\t\t\tanItem.view.destroy();\n\t\t}\n\t\tsuper.onDestroy();\n\t}\n\n\t//\n\t// Helpers\n\t//\n\n\twrapIndex(index) {\n\t\tvar n = this.options.placeholders;\n\t\treturn ((index % n) + n) % n;\n\t}\n\n\tnormalizeEvent(e) {\n\t\tvar x, y, pageX, pageY;\n\t\tif (!this.offsetCalculated) {\n\t\t\tvar offset   = this.$el.offset();\n\t\t\tthis.offsetX = offset.left;\n\t\t\tthis.offsetY = offset.top;\n\t\t}\n\t\tif (e.type === 'click' || e.type === 'mouseup' || e.type === 'mousedown' || e.type === 'mousemove') {\n\t\t\tx     = e.pageX - this.offsetX;\n\t\t\ty     = e.pageY - this.offsetY;\n\t\t\tpageX = e.pageX;\n\t\t\tpageY = e.pageY;\n\t\t}\n\t\telse if (e.type === 'touchstart' || e.type === 'touchend' || e.type === 'touchmove') {\n\t\t\tx     = e.originalEvent.changedTouches[0].pageX - this.offsetX;\n\t\t\ty     = e.originalEvent.changedTouches[0].pageY - this.offsetY;\n\t\t\tpageX = e.originalEvent.changedTouches[0].pageX;\n\t\t\tpageY = e.originalEvent.changedTouches[0].pageY;\n\t\t}\n\t\treturn { x: x, y: y, pageX: pageX, pageY: pageY };\n\t}\n\n\tgetContainerSize() {\n\t\tlet rows = this.getRowsCount();\n\t\tlet infiniteLoadingSize = 0;\n\n\t\tif (this.options.infinite && this.shouldLoadMore()) {\n\t\t\tinfiniteLoadingSize = this.options.infiniteLoadingSize;\n\t\t}\n\n\t\treturn this.containerSize + this.options.headerSize;\n\t}\n\n\tcalculateRowPosition() {\n\t\tif (!this.listWidth || !this.listHeight) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst state       = this.getState();\n\t\tthis.rowPositions = [];\n\t\tthis.rowItems     = [];\n\n\t\tconst headerSize  = this.options.headerSize;\n\t\tconst itemsPerRow = this.options.itemsPerRow;\n\t\tconst orientation = this.options.orientation;\n\n\t\tlet aCumulativePosition = headerSize;\n\t\tlet aSize;\n\t\tlet aRowMaxSize = 0;\n\t\tlet aRow;\n\t\tlet aColumn;\n\t\tlet aColumnWidth;\n\t\tlet aColumnHeight;\n\t\tthis.collection.forEach((aModel, anIndex) => {\n\t\t\taSize = this.getListItemSizeAtIntexWithOptions(anIndex, {\n\t\t\t\tmodel: aModel,\n\t\t\t\tstate: state\n\t\t\t});\n\t\t\taRowMaxSize = Math.max(aRowMaxSize, aSize);\n\n\t\t\taRow = Math.floor(anIndex / itemsPerRow);\n\n\t\t\tif (!this.rowItems[aRow]) {\n\t\t\t\tthis.rowItems.push([]);\n\t\t\t}\n\n\t\t\tthis.rowPositions[anIndex] = aCumulativePosition;\n\n\t\t\tif (orientation === ORIENTATION_VERTICAL) {\n\t\t\t\taColumn      = (anIndex % itemsPerRow);\n\t\t\t\taColumnWidth = (this.listWidth / itemsPerRow);\n\t\t\t\tthis.rowItems[aRow].push({\n\t\t\t\t\tindex: anIndex,\n\t\t\t\t\ttop: aCumulativePosition,\n\t\t\t\t\tright: (aColumn + 1) * aColumnWidth,\n\t\t\t\t\tbottom: aCumulativePosition + aSize,\n\t\t\t\t\tleft: aColumn * aColumnWidth\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\taColumn       = (anIndex % itemsPerRow);\n\t\t\t\taColumnHeight = (this.listHeight / itemsPerRow);\n\t\t\t\tthis.rowItems[aRow].push({\n\t\t\t\t\tindex: anIndex,\n\t\t\t\t\ttop: aColumn * aColumnHeight,\n\t\t\t\t\tright: aCumulativePosition + aSize,\n\t\t\t\t\tbottom: (aColumn + 1) * aColumnHeight,\n\t\t\t\t\tleft: aCumulativePosition\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (anIndex % itemsPerRow === itemsPerRow - 1) {\n\t\t\t\taCumulativePosition += aRowMaxSize;\n\t\t\t\t// Change the bottom property of every column in row\n\t\t\t\t// only if itemsPerRow > 1\n\t\t\t\tif (itemsPerRow > 1) {\n\t\t\t\t\tfor (let i = 0; i < this.rowItems[aRow].length; i++) {\n\t\t\t\t\t\tif (orientation === ORIENTATION_VERTICAL) {\n\t\t\t\t\t\t\tthis.rowItems[aRow][i].bottom = this.rowItems[aRow][i].top + aRowMaxSize;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis.rowItems[aRow][i].right = this.rowItems[aRow][i].left + aRowMaxSize;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\taRowMaxSize = 0;\n\t\t\t}\n\t\t});\n\n\t\tthis.containerSize = aCumulativePosition;\n\t}\n\n\tgetStartIndex() {\n\t\tif (this.options.orientation === ORIENTATION_VERTICAL) {\n\t\t\treturn this.getIndexFromXY(0, this.y);\n\t\t}\n\t\telse {\n\t\t\treturn this.getIndexFromXY(this.x, 0);\n\t\t}\n\t}\n\n\tgetEndIndex() {\n\t\tif (this.options.orientation === ORIENTATION_VERTICAL) {\n\t\t\treturn this.getIndexFromXY(this.listWidth - 1, this.y - this.listHeight);\n\t\t}\n\t\telse {\n\t\t\treturn this.getIndexFromXY(this.x - this.listWidth, this.listHeight - 1);\n\t\t}\n\t}\n\n\tgetXYFromIndex(index) {\n\t\tlet aPosition = this.getPositionAtIndex(index);\n\t\tlet xy = {};\n\t\tif (this.options.orientation === ORIENTATION_VERTICAL) {\n\t\t\txy = {\n\t\t\t\tx: aPosition.column * Math.floor(this.listWidth / this.options.itemsPerRow),\n\t\t\t\ty: this.rowPositions[index]\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\txy = {\n\t\t\t\tx: this.rowPositions[index],\n\t\t\t\ty: aPosition.column * Math.floor(this.listHeight / this.options.itemsPerRow)\n\t\t\t};\n\t\t}\n\t\treturn xy;\n\t}\n\n\tbinarySearch(rows, x, y) {\n\n\t\tx = Math.abs(x);\n\t\ty = Math.abs(y);\n\n\t\tconst inRect = (items, x, y) => {\n\t\t\treturn _.find(items, (anItem) => {\n\t\t\t\treturn x >= anItem.left && x <= anItem.right\n\t\t\t\t\t&& y >= anItem.top && y <= anItem.bottom;\n\t\t\t});\n\t\t};\n\n\t\tconst isBeforeRect = (items, x, y) => {\n\t\t\tif (this.options.orientation === ORIENTATION_VERTICAL)\n\t\t\t\treturn y < items[0].top;\n\t\t\telse\n\t\t\t\treturn x < items[0].left;\n\t\t};\n\n\t\tconst isAfterRect = (items, x, y) => {\n\t\t\tif (this.options.orientation === ORIENTATION_VERTICAL)\n\t\t\t\treturn y > items[0].bottom;\n\t\t\telse\n\t\t\t\treturn x > items[0].right;\n\t\t};\n\n\t\tvar startIndex = 0,\n\t\t\tstopIndex  = rows.length - 1,\n\t\t\tmiddle     = Math.floor((stopIndex + startIndex)/2);\n\n\t\twhile (!inRect(rows[middle], x, y) && startIndex < stopIndex) {\n\n\t\t\t//adjust search area\n\t\t\tif (isBeforeRect(rows[middle], x, y)) {\n\t\t\t\tstopIndex = middle - 1;\n\t\t\t} else if (isAfterRect(rows[middle], x, y)) {\n\t\t\t\tstartIndex = middle + 1;\n\t\t\t}\n\n\t\t\t//recalculate middle\n\t\t\tmiddle = Math.floor((stopIndex + startIndex)/2);\n\t\t}\n\n\t\t//make sure it's the right value\n\t\tlet result = inRect(rows[middle], x, y);\n\t\treturn result ? result.index : -1;\n\t}\n\n\tgetIndexFromXY(x, y) {\n\t\tvar index;\n\t\tvar row;\n\t\tvar column;\n\n\t\t// Fix needed when you create a ListView with display: none;\n\t\tif (this.listWidth === 0)\n\t\t\tthis.listWidth = this.$el.width();\n\n\t\tif (this.listHeight === 0)\n\t\t\tthis.listHeight = this.$el.height();\n\n\t\tindex = this.binarySearch(this.rowItems, x, y);\n\n\t\treturn index;\n\t}\n\n\tgetItemFromXY(x, y) {\n\t\tlet index = this.getIndexFromXY(x, y);\n\t\treturn this.items[this.wrapIndex(index)];\n\t}\n\n\tgetRowsCount() {\n\t\tlet length = this.collection.length;\n\t\treturn Math.ceil(length / (this.options.itemsPerRow || 1));\n\t}\n\n\tgetPositionAtIndex(index) {\n\t\t// Vertical (R,C)\n\t\t//\n\t\t// |---|---|\n\t\t// |0,0|0,1|\n\t\t// |---|---|\n\t\t// |1,0|1,1|\n\t\t// |---|---|\n\t\t// |   |   |\n\n\t\t// Horizontal (R,C)\n\t\t// ------------\n\t\t// |0,0|1,0|\n\t\t// ------------\n\t\t// |0,1|1,1|\n\t\t// ------------\n\t\treturn {\n\t\t\trow: Math.floor(index / this.options.itemsPerRow), // First row = 0\n\t\t\tcolumn: index % this.options.itemsPerRow\n\t\t};\n\t}\n\n\tgetItemAtIndex(index) {\n\t\treturn this.items[this.wrapIndex(index)];\n\t}\n\n\tgetListItemSizeAtIntexWithOptions(index) {\n\t\tif (this.options.orientation === ORIENTATION_VERTICAL) {\n\t\t\treturn this.options.itemHeight;\n\t\t}\n\t\telse {\n\t\t\treturn this.options.itemWidth;\n\t\t}\n\t}\n\n\tgetItemsCount() {\n\t\tif (!this.collection) return 0;\n\t\treturn this.collection.length;\n\t}\n\n\n\n}\n\n// Const\nListView.ORIENTATION_VERTICAL   = ORIENTATION_VERTICAL;\nListView.ORIENTATION_HORIZONTAL = ORIENTATION_HORIZONTAL;\nListView.TOP_DOWN               = 1;\nListView.DOWN_TOP               = 2;\nListView.LEFT_RIGHT             = 4;\nListView.RIGHT_LEFT             = 8;\n",
    "\nimport $ from 'jquery';\n\n// Create an element div for util\nexport let _elementStyle = document.createElement('div').style;\n\n\n// Return the vendor\n// http://addyosmani.com/polyfillthehtml5gaps/slides/#78\nexport function getVendorStyle(prop){\n\tlet prefixes = ['Moz','Khtml','Webkit','O','ms'];\n\tlet upper    = prop.charAt(0).toUpperCase() + prop.slice(1);\n\n\tif ( prop in _elementStyle )\n\t\treturn prop;\n\n\tfor (var len = prefixes.length; len--; ){\n\t\tif ( (prefixes[len] + upper)  in _elementStyle )\n\t\t\treturn (prefixes[len] + upper);\n\t}\n\treturn;\n};\n\n// Translate3d\nexport function translate3d(el, x, y, z, immediate) {\n\n\tif ( el instanceof $ )\n\t\tel = el.get(0);\n\n\tif ( !el instanceof Element )\n\t\tthrow new Error('It is not an object Element');\n\n\tif ( typeof x === 'number' )\n\t\tx = x.toString() + 'px';\n\tif ( typeof y === 'number' )\n\t\ty = y.toString() + 'px';\n\tif ( typeof z === 'number' )\n\t\tz = z.toString() + 'px';\n\n\t//\n\tlet transformProp = getVendorStyle('transform');\n\tlet transform     = 'translate3d(' + x +', ' + y + ', ' + z + ')';\n\n\t//\n\tif (immediate) {\n\t\tel.style[ transformProp ] = transform;\n\t\treturn;\n\t}\n\n\t//\n\twindow.requestAnimationFrame(() => {\n\t\tel.style[ transformProp ] = transform;\n\t});\n\n};\n\n// scale\nexport function scale(el, scale, immediate) {\n\n\tif ( el instanceof $ )\n\t\tel = el.get(0);\n\n\tif ( !el instanceof Element )\n\t\tthrow new Error('It is not an object Element');\n\n\tlet transformProp = getVendorStyle('transform');\n\tlet transform     = 'scale(' + scale + ')';\n\n\tif (immediate) {\n\t\tel.style[ transformProp ] = transform;\n\t\treturn;\n\t}\n\n\twindow.requestAnimationFrame(() => {\n\t\tel.style[ transformProp ] = transform;\n\t});\n\n};\n\n// scaleAndTranslate3d\nexport function scaleAndTranslate3d(el, scale, x, y, z, immediate) {\n\n\tif ( el instanceof $ )\n\t\tel = el.get(0);\n\n\tif ( !el instanceof Element )\n\t\tthrow new Error('It is not an object Element');\n\n\tif ( typeof x === 'number' )\n\t\tx = x.toString() + 'px';\n\tif ( typeof y === 'number' )\n\t\ty = y.toString() + 'px';\n\tif ( typeof z === 'number' )\n\t\tz = z.toString() + 'px';\n\n\tlet transformProp = getVendorStyle('transform');\n\tlet transform     = 'scale(' + scale + ') translate3d(' + x +', ' + y + ', ' + z + ')';\n\n\tif (immediate) {\n\t\tel.style[ transformProp ] = transform;\n\t\treturn;\n\t}\n\n\twindow.requestAnimationFrame(() => {\n\t\tel.style[ transformProp ] = transform;\n\t});\n\n};\n\n// Overflow scrolling\nlet overflowScrollingProperty;\nexport function overflowScrolling(el, enable, orientation = 'vertical') {\n\n\tif (el instanceof $)\n\t\tel = el.get(0);\n\n\tif (!overflowScrollingProperty)\n\t\toverflowScrollingProperty = 'webkitOverflowScrolling' in el.style ? 'webkitOverflowScrolling' : 'overflowScrolling';\n\n\tif (enable) {\n\t\tel.style[overflowScrollingProperty] = 'touch';\n\t\tif (orientation === 'vertical') {\n\t\t\tel.style.overflowX = 'hidden';\n\t\t\tel.style.overflowY = 'auto';\n\t\t}\n\t\telse if (orientation === 'horizontal') {\n\t\t\tel.style.overflowX = 'auto';\n\t\t\tel.style.overflowY = 'hidden';\n\t\t}\n\t} else {\n\t\tel.style[overflowScrollingProperty] = 'auto';\n\t\tel.style.overflowX = 'hidden';\n\t\tel.style.overflowY = 'hidden';\n\t}\n\n};\n\n// CSS transition\nexport function transition(el, transition) {\n\tif ( el instanceof $ )\n\t\tel = el.get(0);\n\tel.style[getVendorStyle('transition')] = transition;\n}\n",
    "import context from 'context-utils';\n\nexport default function getContextOptions(viewName) {\n\tif (context && context.uikit && context.uikit[viewName])\n\t\treturn context.uikit[viewName];\n\treturn {};\n}\n",
    "import _ from \"underscore\";\nimport $ from \"jquery\";\nimport BaseView from \"../BaseView\";\n\nexport default class ListItemView extends BaseView {\n\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tthis._visibility = false;\n\n\t\tthis.listenTo(this.model, 'change', this.render);\n\t}\n\n\tsetModel(newModel) {\n\t\tif (this.model) {\n\t\t\tthis.stopListening(this.model);\n\t\t\tthis.model = null;\n\t\t}\n\t\tif (newModel) {\n\t\t\tthis.model = newModel;\n\t\t\tthis.listenTo(this.model, 'change', this.render);\n\t\t}\n\t\treturn this;\n\t}\n\n\tonRender(rendered) {\n\t\tif (!rendered) {\n\t\t\tthis.cache.$title = $('<span>').text(this.model.toString());\n\t\t\tthis.$el.append(this.cache.$title);\n\t\t}\n\t\telse if (this.model) {\n\t\t\tthis.cache.$title.text(this.model.toString());\n\t\t}\n\t\telse {\n\t\t\tthis.cache.$title.text('');\n\t\t}\n\t\treturn this;\n\t}\n\n}\n",
    "import _ from \"underscore\";\nimport BaseView from \"./BaseView\";\n\nlet callbackIdGenerator = 0;\nlet emptyImage = 'empty.gif';\nlet cache = [];\nlet timeout;\n\nexport default class ImageView extends BaseView {\n\n\ttagName() {\n\t\treturn 'figure';\n\t}\n\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tthis._loaded = false;\n\t\tthis._loadDebounce = null;\n\t\tthis._appended = false;\n\n\t\tthis.src     = '';\n\n\t\tthis.setDefaultsOptions({\n\t\t\tsrc: null,\n\t\t\tautoload: true,\n\t\t\tplaceholder: null,\n\t\t\tsize: 'auto', // auto, normal, contain, cover. Scale the image to its container\n\t\t\tworker: false,\n\t\t\tviewport: null,\n\t\t\tclassName: 'ui-image',\n\t\t\tposition: 'center', // top-left, top, top-right, center-left, center, center-right, bottom-left, bottom, bottom-right\n\t\t\torientation: 0\n\t\t});\n\n\t\tthis.$el.addClass(_.result(this.options, 'className') || '');\n\n\t\tif (this.options.size !== 'normal')\n\t\t\tthis.$el.addClass(' ' + _.result(this.options, 'position') || '');\n\n\t\tthis.image = new Image();\n\t\tthis.image.style.opacity = 0;\n\n\t\t// Placeholder\n\t\tthis.placeholderImage = new Image();\n\t\tthis.placeholderImage.onload = () => {\n\t\t\tthis._placeholderLoaded = true;\n\t\t\tif (!this._loaded) {\n\t\t\t\tthis.requestAnimationFrame(() => {\n\t\t\t\t\tthis.image.src = this.placeholderImage.src;\n\t\t\t\t\tthis.requestAnimationFrame(() => {\n\t\t\t\t\t\tif ( this.rendered )\n\t\t\t\t\t\t\tthis.render();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tif (this.options.placeholder) {\n\t\t\tthis.placeholderImage.src = this.options.placeholder;\n\t\t}\n\n\t\tthis.bufferImage = new Image();\n\n\t\t// Normal\n\t\tthis.bufferImage.onerror = (err) => {\n\t\t\tthis._loaded = false;\n\t\t\tthis.requestAnimationFrame(() => {\n\t\t\t\tthis.image.src = this.options.placeholder || emptyImage;\n\t\t\t});\n\t\t};\n\t\tthis.bufferImage.onload = () => {\n\t\t\tthis._loaded = true;\n\t\t\tthis.requestAnimationFrame(() => {\n\t\t\t\tthis.image.src = this.src;\n\t\t\t\tthis.requestAnimationFrame(() => {\n\t\t\t\t\tif ( this.rendered )\n\t\t\t\t\t\tthis.render();\n\t\t\t\t\tthis.trigger('loaded');\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\tthis.setSource(this.options.src);\n\t}\n\n\tload() {\n\t\tif (this.src == this.bufferImage.src)\n\t\t\treturn;\n\t\tthis._loaded = false;\n\t\tif (this._loadDebounce)\n\t\t\tthis.cancelAnimationFrame(this._loadDebounce);\n\t\tthis._loadDebounce = this.requestAnimationFrame(() => {\n\t\t\tthis.bufferImage.src = this.src;\n\t\t});\n\t}\n\n\tsetSource(src, orientation) {\n\t\tif (this.src == src) return;\n\t\tif (typeof orientation !== 'undefined') {\n\t\t\tthis.options.orientation = orientation;\n\t\t}\n\t\tif (this._loadDebounce)\n\t\t\tthis.cancelAnimationFrame(this._loadDebounce);\n\t\tthis.src = src;\n\t\tif (this.options.autoload) {\n\t\t\tthis.load();\n\t\t\treturn;\n\t\t}\n\t\t// this.image.style.visiblity = 'hidden';\n\t\tthis.image.style.opacity = 0;\n\t\tthis.image.src = emptyImage;\n\t}\n\n\tsetPlaceholder(src, orientation) {\n\t\tif (this.placeholderImage.src == src) return;\n\t\tif (typeof orientation !== 'undefined') {\n\t\t\tthis.options.orientation = orientation;\n\t\t}\n\t\tif (this._loadDebounce)\n\t\t\tthis.cancelAnimationFrame(this._loadDebounce);\n\t\tthis.placeholderImage.src = src;\n\t\tthis.image.style.opacity = 0;\n\t\tthis.image.src = emptyImage;\n\t}\n\n\tonRender(rendered) {\n\t\tif (!this._loaded && !this._placeholderLoaded)\n\t\t\treturn;\n\n\t\tlet bufferImage = this.bufferImage;\n\t\tlet orientation = this.options.orientation;\n\n\t\tif (!this._loaded && this._placeholderLoaded) {\n\t\t\tbufferImage = this.placeholderImage;\n\t\t\torientation = 0;\n\t\t}\n\n\t\tlet width       = bufferImage.width;\n\t\tlet height      = bufferImage.height;\n\n\t\tvar viewport = this.options.viewport ? this.options.viewport : this.viewport;\n\t\tif (!viewport) {\n\t\t\t// CAUTION: Always specify viewport dimensions to improve the performance!\n\t\t\tviewport = this.viewport = { width: this.$el.width(), height: this.$el.height() };\n\t\t}\n\n\t\tif (Math.abs(orientation) === 90) {\n\t\t\tviewport = {\n\t\t\t\twidth:  viewport.height,\n\t\t\t\theight: viewport.width\n\t\t\t};\n\t\t}\n\n\t\tvar cssText = '';\n\n\t\tvar size = this.options.size;\n\t\tif (size !== 'normal') {\n\t\t\tvar resized = {};\n\t\t\tvar cover   = size === 'cover';\n\n\t\t\tif (size === 'auto')\n\t\t\t\tcover = width < height;\n\n\t\t\tvar viewportRatio = viewport.width / viewport.height;\n\t\t\tvar imageRatio    = width / height;\n\t\t\tvar position      = this.options.position;\n\n\t\t\tvar top;\n\t\t\tvar left;\n\t\t\tvar displayWidth;\n\t\t\tvar displayHeight;\n\t\t\tvar marginTop;\n\t\t\tvar marginLeft;\n\n\t\t\tif ((cover === true && imageRatio >= viewportRatio) || (cover === false && imageRatio <= viewportRatio)) {\n\t\t\t\tresized.width = width * viewport.height / height;\n\t\t\t\tdisplayWidth  = resized.width;\n\t\t\t\tdisplayHeight = viewport.height;\n\t\t\t} else if ((cover === true && imageRatio < viewportRatio) || (cover === false && imageRatio > viewportRatio)) {\n\t\t\t\tresized.height = height * viewport.width / width;\n\t\t\t\tdisplayWidth  = viewport.width;\n\t\t\t\tdisplayHeight = resized.height;\n\t\t\t}\n\n\t\t\tswitch (position) {\n\t\t\t\tcase 'top':\n\t\t\t\t\ttop        = 0;\n\t\t\t\t\tleft       = 50;\n\t\t\t\t\tmarginTop  = 0;\n\t\t\t\t\tmarginLeft = displayWidth/-2;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'center':\n\t\t\t\tdefault:\n\t\t\t\t\ttop        = 50;\n\t\t\t\t\tleft       = 50;\n\t\t\t\t\tmarginTop  = displayHeight/-2;\n\t\t\t\t\tmarginLeft = displayWidth/-2;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcssText =\n\t\t\t\t'position: absolute;' +\n\t\t\t\t'top: ' + top + '%;' +\n\t\t\t\t'left: ' + left + '%;' +\n\t\t\t\t'height: ' + displayHeight + 'px;' +\n\t\t\t\t'width: ' + displayWidth + 'px;' +\n\t\t\t\t'margin-top: ' + marginTop + 'px;' +\n\t\t\t\t'margin-left: ' + marginLeft + 'px;';\n\t\t}\n\n\t\tif (orientation !== 0) {\n\t\t\tcssText += '-webkit-transform: rotate(' + orientation + 'deg);';\n\t\t\tcssText += 'transform: rotate(' + orientation + 'deg);';\n\t\t}\n\n\t\tthis.requestAnimationFrame(() => {\n\t\t\tcssText += 'opacity: 1;';\n\t\t\tthis.image.style.cssText = cssText;\n\t\t\tif (!this._appended) {\n\t\t\t\tthis.$el.append(this.image);\n\t\t\t\tthis._appended = true;\n\t\t\t}\n\t\t});\n\t}\n\n\trefresh() {\n\t\tthis.viewport = null;\n\t\tthis.render();\n\t}\n\n\twidth(val) {\n\t\tif (typeof val !== \"undefined\")\n\t\t\treturn this.image.width = val;\n\t\treturn this.image.width || 0;\n\t}\n\n\theight(val) {\n\t\tif (typeof val !== \"undefined\")\n\t\t\treturn this.image.height = val;\n\t\treturn this.image.height || 0;\n\t}\n\n\tdestroy() {\n\t\tcache.push(this.image);\n\t\tthis.image.src = emptyImage;\n\t\tif (this.placeholderImage.src) {\n\t\t\tcache.push(this.placeholderImage);\n\t\t\tthis.placeholderImage.src = emptyImage;\n\t\t}\n\t\tif (timeout) clearTimeout(timeout);\n\t\ttimeout = setTimeout(function(){ cache = [] }, 60000);\n\t\tsuper.destroy();\n\t}\n\n}\n",
    "import _ from \"underscore\";\nimport context from \"context-utils\";\nimport { View } from \"backbone\";\n\nexport default class BaseView extends View {\n\n\tconstructor(options) {\n\t\tsuper(options);\n\t\t// Initialize view options\n\t\tthis.options = options || {};\n\n\t\t// Set de default options\n\t\tthis.setDefaultsOptions({ state: null, removeOnDestroy: true });\n\n\t\t// State [optional]\n\t\tthis.state = this.options.state;\n\t\tdelete this.options.state;\n\t\tthis.cache = {};\n\t\t// Store sub views\n\t\tthis.views = {};\n\t\t// Check if the view is rendered\n\t\tthis.rendered = false;\n\t\t// Alias\n\t\tthis.rAF = function () {\n\t\t\tconsole.warn('method rAF deprecated');\n\t\t} // this.requestAnimationFrame;\n\t\tthis.cAF = function () {\n\t\t\tconsole.warn('method cAF deprecated');\n\t\t} // this.cancelAnimationFrame;\n\t\t// Backbone touch active class\n\t\tthis.touchActiveClassName = 'touch-active';\n\t}\n\n\tclassName() {\n\t\treturn 'ui-base-view ' + ( _.result(this, \"addClass\") || '' );\n\t}\n\n\t// Set defaults options\n\tsetDefaultsOptions(defaults, moreDefaults){\n\t\t_.defaults( this.options, defaults, moreDefaults );\n\t\treturn this;\n\t}\n\n\t// Set the view state\n\tsetState(state) {\n\t\tthis.state = state;\n\t\treturn this;\n\t}\n\n\t// Return the view state\n\tgetState() {\n\t\treturn this.state;\n\t}\n\n\t// Add events to the current view\n\taddEvents(events) {\n\t\tthis.events = _.defaults(events, this.events || {});\n\t\tthis.delegateEvents();\n\t\treturn this;\n\t}\n\n\t// Add a new subview\n\taddSubView(name, view, state) {\n\t\t// When adding a subview inject the state\n\t\tif (view instanceof BaseView) {\n\t\t\tif (state) view.setState(state);\n\t\t\tif (this.state) view.setState(this.state);\n\t\t}\n\t\tthis.views[name] = view;\n\t\treturn this;\n\t}\n\n\t// Get a subview\n\tgetSubView(name) {\n\t\treturn this.views[name];\n\t}\n\n\t// Remove a subview\n\tremoveSubView(name){\n\t\tlet view = this.getSubView(name);\n\t\tif (view instanceof BaseView) {\n\t\t\tthis.stopListening(view);\n\t\t\tview.destroy();\n\t\t}\n\t\tdelete this.views[name];\n\t\treturn this;\n\t}\n\n\t// Wrapper for Request Animation Frame\n\trequestAnimationFrame(callback) {\n\t\treturn window.requestAnimationFrame(callback);\n\t}\n\n\t// Wrapper for Cancel Animation Frame\n\tcancelAnimationFrame(id) {\n\t\treturn window.cancelAnimationFrame(id);\n\t}\n\n\t// Manipulate z-index of the view\n\tsetZindex(zIndex) {\n\t\tif ( _.isNumber(zIndex) ){\n\t\t\twindow.requestAnimationFrame(()=>{\n\t\t\t\tthis._zIndex = zIndex;\n\t\t\t\tthis.el.style.zIndex = zIndex;\n\t\t\t});\n\t\t}\n\t\treturn this;\n\t}\n\n\t// Obtain z-index of the view\n\tgetZindex() {\n\t\treturn this._zIndex;\n\t}\n\n\t// Debounce a method\n\tdebounce(method, delay) {\n\t\tif (!delay) delay = 500;\n\t\tthis[method] = _.debounce(_.bind(this[method], this), delay, true);\n\t}\n\n\t// Wrap render event inside requestAnimationFrame and delgate subviews\n\t// to be rendered\n\trender() {\n\t\tconst renderEnd = () => {\n\t\t\tthis.delegateEvents();\n\t\t\tthis.rendered = true;\n\t\t\tif (this.onAfterRender)\n\t\t\t\tthis.onAfterRender();\n\t\t}\n\n\t\tif (this.onRender) {\n\t\t\tif ( this.rafId )\n\t\t\t\tthis.cancelAnimationFrame(this.rafId);\n\t\t\tthis.rafId = this.requestAnimationFrame(() => {\n\t\t\t\tthis.rafId = null;\n\t\t\t\t// Pass to the onRender callback if the view is already rendered\n\t\t\t\tthis.onRender(this.rendered, renderEnd);\n\n\t\t\t\tif (this.onRender.length === 1)\n\t\t\t\t\trenderEnd();\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tthis.rendered = true;\n\t\t}\n\t\treturn this;\n\t}\n\n\t// Empty onRender callback\n\tonRender(rendered) {\n\t\t// This method should be implemented on the subview\n\t}\n\n\t// Called after onRender\n\tonAfterRender() {\n\t\t// This method should be implemented on the subview\n\t}\n\n\t// Scrolla la view fino all'elemento oppure ad una posizione precisa.\n\t// el può essere un elemento del DOM, un elemento jQuery oppure un intero.\n\tscrollToElement(scroller, el, animated) {\n\t\tif (typeof animated === 'undefined') {\n\t\t\tanimated = true;\n\t\t}\n\n\t\tif (typeof el === 'undefined') {\n\t\t\tel = scroller;\n\t\t\tscroller = this.el;\n\t\t}\n\n\t\tif (typeof scroller === 'undefined') {\n\t\t\tscroller = this.el;\n\t\t}\n\n\t\tlet currentDevice = context.device.getOS();\n\t\tlet nameDevice    = currentDevice.name.toLowerCase();\n\n\t\t// Normalizza lo scroller\n\t\tif (scroller instanceof $) {\n\t\t\tscroller = scroller.get(0);\n\t\t}\n\n\t\t// Porta in alto lo scroll della pagina\n\t\tlet newScroll;\n\t\tif (el instanceof $) {\n\t\t\tnewScroll = scroller.scrollTop + el.position().top;\n\t\t}\n\t\telse if (_.isNumber(el)) {\n\t\t\tnewScroll = el;\n\t\t}\n\t\telse {\n\t\t\tnewScroll = scroller.scrollTop + $(el).position().top;\n\t\t}\n\n\t\tthis.requestAnimationFrame(() => {\n\t\t\t// Blocca lo scroll dell'utente\n\t\t\tstyle.overflowScrolling(scroller, false);\n\t\t\t// Per i vecchi dispositivi non viene fatta nessuna animazione\n\t\t\tif (!animated || (nameDevice == 'android' && currentDevice.version < 5) || nameDevice == 'windows phone') {\n\t\t\t\t// Riabilita lo scroll dell'utente\n\t\t\t\tstyle.overflowScrolling(scroller, true);\n\t\t\t\tscroller.scrollTop = newScroll;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$(scroller).animate({\n\t\t\t\t\tscrollTop: newScroll\n\t\t\t\t}, 200, () => {\n\t\t\t\t\t// Riabilita lo scroll dell'utente\n\t\t\t\t\tstyle.overflowScrolling(scroller, true);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t// Destroy of view\n\t// reference: http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/\n\tdestroy() {\n\t\tthis.off();\n\t\tif (this.options.removeOnDestroy){\n\t\t\tthis.requestAnimationFrame(()=>{\n\t\t\t\tthis.remove();\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tthis.undelegateEvents();\n\t\t}\n\t\tif (this.onDestroy)\n\t\t\tthis.onDestroy();\n\t}\n\n\t// Propagates the command to destroy all the subview\n\tonDestroy() {\n\t\t_.forEach(this.views, (aView) => {\n\t\t\tif (aView instanceof BaseView)\n\t\t\t\taView.destroy();\n\t\t});\n\t}\n\n}\n",
    "import { Model } from 'backbone';\n\nexport default class ModelC extends Model {};\n",
    "import { Model } from 'backbone';\n\nexport default class ModelB extends Model {};\n",
    "import { Model } from 'backbone';\n\nexport default class ModelA extends Model {};\n",
    "(function(root, factory) {\n\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(['backbone', 'underscore'], function(Backbone, _) {\n\t\t\treturn factory(Backbone, _);\n\t\t});\n\t} else if (typeof exports !== 'undefined') {\n\t\tvar Backbone = require('backbone');\n\t\tvar _ = require('underscore');\n\t\tmodule.exports = factory(Backbone, _);\n\t} else {\n\t\tfactory(root.Backbone, root._);\n\t}\n\n}(this, function(Backbone, _) {\n\n\t'use strict';\n\n\tvar prefix = (function () {\n\t\tvar styles = window.getComputedStyle(document.documentElement, '');\n\t\tvar pre    = (Array.prototype.slice\n\t\t\t.call(styles)\n\t\t\t.join('')\n\t\t\t.match(/-(moz|webkit|ms)-/) || (styles.OLink === '' && ['', 'o'])\n\t\t)[1];\n\t\tvar dom    = ('WebKit|Moz|MS|O').match(new RegExp('(' + pre + ')', 'i'))[1];\n\t\treturn {\n\t\t\tdom: dom,\n\t\t\tlowercase: pre,\n\t\t\tcss: '-' + pre + '-',\n\t\t\tjs: pre[0].toUpperCase() + pre.substr(1)\n\t\t};\n\t})();\n\n\t// Refer: http://www.w3schools.com/jsref/event_animationend.asp\n\t// webkitAnimationEnd: Code for Chrome, Safari and Opera\n\t// animationend: other browser.\n\t// Compability: >= IE10, >= 4.0 Chrome, >= 16 Moz, >= 4.0 Safari, >= 15.0 Opera\n\tvar _animationEnd = [ 'WebKit', 'O' ].indexOf(prefix.dom) > -1 ? 'webkitAnimationEnd' : 'animationend';\n\n\n\tvar ViewStack = Backbone.View.extend({\n\n\t\t_stack        : null,\n\t\t_current      : null,\n\t\t_length       : null,\n\t\t_baseZIndex   : 0,\n\t\t_zIndexGap    : 100,\n\n\t\tinitialize: function initialize(options){\n\n\t\t\toptions = _.defaults(options||{}, {zIndexGap: 100});\n\n\t\t\tif ( _.isObject(options.context) )\n\t\t\t\tthis._context = options.context;\n\n\t\t\t// The element is composed of:\n\t\t\t//  {\n\t\t\t//      view    : { instance of Backbone.View }\n\t\t\t//      options : { the view options }\n\t\t\t//  }\n\t\t\tthis._stack        = [];\n\t\t\tthis._current      = null;\n\t\t\tthis.$el.empty();\n\n\t\t\tif ( _.isNumber(options.zIndex) && options.zIndex > 0 )\n\t\t\t\tthis.setBaseZIndex( Math.floor(options.zIndex) );\n\t\t\telse\n\t\t\t\tthis.setBaseZIndex(0);\n\n\t\t\tif ( _.isNumber(options.zIndexGap) && options.zIndexGap > 0 )\n\t\t\t\tthis._zIndexGap = Math.floor(options.zIndexGap);\n\t\t\telse\n\t\t\t \tthis._zIndexGap = 100;\n\n\t\t},\n\n\t\tinitStack: function initStack(){\n\t\t\tif ( this._length === null ){\n\t\t\t\tthis._length = this._stack.length;\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tthis.clearStack( this._length );\n\t\t\treturn this;\n\t\t},\n\n\t\tclearStack: function clearStack(length){\n\t\t\tif (!length) length = 0;\n\t\t\tvar cleared = false;\n\t\t\twhile ( this._stack.length > length ){\n\t\t\t\tthis.popView(null, { silent: true });\n\t\t\t\tcleared = true;\n\t\t\t}\n\t\t\tif (cleared) {\n\t\t\t\tthis.trigger('clear', this);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tsize: function size(){\n\t\t\treturn this._stack.length;\n\t\t},\n\n\t\texists: function exists(classType) {\n\t\t\tvar result = _.find(this._stack, function (element) {\n\t\t\t\treturn element.view instanceof classType;\n\t\t\t});\n\t\t\treturn !!result;\n\t\t},\n\n\t\tindexOf: function indexOf(view) {\n\t\t\tfor (var i = this._stack.length -1; i >= 0; i--) {\n\t\t\t\tif ( this._stack[i].view === view ){\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\n\t\tgetView: function getView(){\n\t\t\tif ( this._stack.length > 0 ){\n\t\t\t\tvar element = this._stack[ this._stack.length - 1 ];\n\t\t\t\tif ( _.isObject(element) )\n\t\t\t\t\treturn element.view;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\tgetViewActive: function getViewActive(){\n\t\t\treturn this._current;\n\t\t},\n\n\t\tgetActiveViewWithOptions: function getActiveViewWithOptions() {\n\t\t\treturn this._stack[ this._stack.length-1 ];\n\t\t},\n\n\t\tgetViewAtIndex: function getViewAtIndex(index){\n\t\t\tvar element = this._stack[index];\n\t\t\tif ( _.isObject(element) )\n\t\t\t\treturn element.view;\n\t\t\treturn null;\n\t\t},\n\n\t\tgetFirstInstanceFromClassType: function getFirstInstanceFromClassType(classType) {\n\t\t\tvar r = _.find(this._stack, function (aItem) {\n\t\t\t\treturn _.isObject(aItem) && aItem.view instanceof classType;\n\t\t\t});\n\t\t\treturn r ? r.view : null;\n\t\t},\n\n\t\tgetZIndex: function () {\n\t\t\treturn (this._stack.length * 100) + this._zIndexGap + this._baseZIndex;\n\t\t},\n\n\t\tsetBaseZIndex: function (value) {\n\t\t\tthis._baseZIndex = parseInt(value);\n\t\t\treturn this;\n\t\t},\n\n\t\tgetBaseZIndex: function () {\n\t\t\treturn this._baseZIndex;\n\t\t},\n\n\n\t\t// Add a view to viewstack\n\t\tpushView: function pushView( newView, options ){\n\t\t\tif ( !(newView instanceof Backbone.View) ) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\toptions = _.defaults(options || {}, {\n\t\t\t\tanimatePreviousView: true,\n\t\t\t\trender: true\n\t\t\t});\n\n\t\t\tif ( this._current === newView )\n\t\t\t\treturn this;\n\n\t\t\tvar oldActiveView  = this._current;\n\t\t\tvar zIndex         = this.getZIndex();\n\n\t\t\tif ( newView.setZindex )\n\t\t\t\tnewView.setZindex( zIndex );\n\t\t\telse\n\t\t\t\tnewView.el.style.zIndex = zIndex;\n\n\t\t\t//\n\t\t\t// NewView:\n\t\t\t// onBeforePush\n\t\t\t//      push into stack\n\t\t\t//      append in the DOM\n\t\t\t// onPush\n\t\t\t//      render\n\t\t\t// onBeforeActivate\n\t\t\t//      wait for the end of the animation. If it is not animated runs immediately.\n\t\t\t// onActivate\n\t\t\t//\n\n\t\t\t//\n\t\t\t// CurrentView\n\t\t\t// onBeforeDeactivate()\n\t\t\t//      animate\n\t\t\t// onDeactivate() ... In this hook deactivate all events, scroll, ecc\n\t\t\t//\n\n\n\t\t\t// Hook: before push\n\t\t\tif ( newView.onBeforePush )\n\t\t\t\tnewView.onBeforePush();\n\n\t\t\t// Add to stack\n\t\t\tthis._stack.push({\n\t\t\t\tview    : newView,\n\t\t\t\toptions : options\n\t\t\t});\n\n\t\t\t// Append into DOM\n\t\t\tthis.$el.append( newView.el );\n\n\t\t\t// Hook: on push\n\t\t\tif ( newView.onPush )\n\t\t\t\tnewView.onPush();\n\n\t\t\t// Render the view\n\t\t\tif ( options.render )\n\t\t\t\tnewView.render();\n\n\t\t\t// Set the current view\n\t\t\tthis._current = newView;\n\n\n\t\t\t// Hook:Deactive old active view\n\t\t\tif ( options.animatePreviousView === true ) {\n\t\t\t\tthis._hookDeactive( oldActiveView, options.animated );\n\t\t\t} else {\n\t\t\t\tif (oldActiveView.onDeactivate)\n\t\t\t\t\toldActiveView.onDeactivate();\n\t\t\t}\n\n\t\t\t// Hook: Active new view\n\t\t\tthis._hookActivate( newView, options.animated, true );\n\n\n\t\t\t// Update view's url\n\t\t\tthis.trigger('pushed', newView).refreshUrl(options.url);\n\n\t\t\treturn this;\n\t\t},\n\n\t\t// Remove a view from viewstack\n\t\tpopView: function popView(poppedView, options){\n\t\t\tif (!(poppedView instanceof Backbone.View) && typeof options === \"undefined\" ) {\n\t\t\t\toptions    = poppedView;\n\t\t\t\tpoppedView = undefined;\n\t\t\t}\n\n\t\t\tif ( !_.isObject(options) )\n\t\t\t\toptions = {};\n\n\t\t\tvar self \t    = this;\n\t\t\tvar currentView = self._current;\n\n\t\t\tif ( _.isUndefined(poppedView) || _.isNull(poppedView) )\n\t\t\t\tpoppedView = currentView;\n\n\n\t\t\t// Hook: before pop\n\t\t\tif ( poppedView.onBeforePop )\n\t\t\t\tpoppedView.onBeforePop();\n\n\n\t\t\tif ( !options.animated ){\n\t\t\t\tpoppedView = self._popView(poppedView, options);\n\t\t\t\trunPopHook();\n\t\t\t\treturn poppedView;\n\t\t\t}\n\n\t\t\tpoppedView = self._popView(poppedView, options);\n\n\t\t\tif ( !poppedView )\n\t\t\t\treturn null;\n\n\n\t\t\tvar animationPopDuration = null;\n\t\t\tif ( poppedView.getAnimationPopDuration )\n\t\t\t\tanimationPopDuration = poppedView.getAnimationPopDuration();\n\n\t\t\tif ( animationPopDuration !== null ){\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\trunPopHook()\n\t\t\t\t}, animationPopDuration );\n\t\t\t\tpoppedView.$el.addClass('pop');\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif ( _.isString(animationPopDuration) && !_.isEmpty(animationPopDuration) ){\n\n\t\t\t\tpoppedView.$el.on(_animationEnd, function (e) {\n\t\t\t\t\tif ( e && e.originalEvent && e.originalEvent.animationName == animationPopDuration ){\n\t\t\t\t\t\tpoppedView.$el.off(_animationEnd);\n\t\t\t\t\t\trunPopHook()\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tpoppedView.$el.addClass('pop');\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tpoppedView.$el.one(_animationEnd, function (e) {\n\t\t\t\trunPopHook()\n\t\t\t});\n\t\t\tpoppedView.$el.addClass('pop');\n\n\t\t\treturn poppedView;\n\n\t\t\tfunction runPopHook(destroy) {\n\t\t\t\tif ( poppedView.onPop )\n\t\t\t\t\tpoppedView.onPop();\n\t\t\t\tpoppedView.trigger('pop');\n\t\t\t\tif ( poppedView.destroy )\n\t\t\t\t\tpoppedView.destroy();\n\t\t\t}\n\t\t},\n\n\t\tpopViewFromClassType: function popViewFromClassType(classType, options) {\n\t\t\tvar self = this;\n\t\t\tvar instances = _.filter(this._stack, function (item) {\n\t\t\t\treturn item.view instanceof classType;\n\t\t\t});\n\t\t\t_.forEach(instances, function (anInstance) {\n\t\t\t\tself.popView(anInstance.view, anInstance.options);\n\t\t\t});\n\t\t\treturn this;\n\t\t},\n\n\t\tpopViewToInstance: function popViewToInstance(instance, options) {\n\t\t\toptions = _.defaults(options || {}, {\n\t\t\t\tpopInstance: true\n\t\t\t});\n\t\t\tvar indexOfViewToPop = this.indexOf(instance);\n\t\t\tif (indexOfViewToPop === -1) return;\n\t\t\tfor (var i = this._stack.length - 1; shouldPopView(i); i--) {\n\t\t\t\tthis.popView(this._stack[i].view, options);\n\t\t\t}\n\t\t\treturn this;\n\n\t\t\tfunction shouldPopView(indexOfView) {\n\t\t\t\tif (indexOfView > indexOfViewToPop)\n\t\t\t\t\treturn true;\n\t\t\t\telse if (options.popInstance && indexOfView === indexOfViewToPop)\n\t\t\t\t\treturn true;\n\t\t\t\telse\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\n\t\tonSwipeBack: function onSwipeBack(percent, animated) {\n\t\t\tvar indexCurrentView = this.indexOf( this._current );\n\t\t\tvar prevView = this.getViewAtIndex( indexCurrentView-1 );\n\t\t\tif ( prevView instanceof Backbone.View && prevView.move ){\n\t\t\t\tprevView.move(100-percent, 2, animated); // TODO: Mettere la costante RESTORE = 2\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\n\t\t// Update page URL\n\t\trefreshUrl: function refreshUrl(url) {\n\t\t\tvar context = this._context;\n\t\t\tif ( !_.isObject(context) )\n\t\t\t\treturn this;\n\n\t\t\tif (!url) {\n\t\t\t\tvar stack = this._stack;\n\t\t\t\tvar aChunck;\n\t\t\t\turl = [];\n\t\t\t\t_.each(stack, function (anElement) {\n\t\t\t\t\taChunck = _.result(anElement.view, 'url');\n\t\t\t\t\tif (aChunck)\n\t\t\t\t\t\turl.push(aChunck);\n\t\t\t\t});\n\t\t\t\turl = url.join('/');\n\t\t\t}\n\n\t\t\tif ( context && context.page && typeof url == \"string\" && !_.isEmpty(url) )\n\t\t\t\tcontext.page.navigate(url, { trigger: false });\n\n\t\t\treturn this;\n\t\t},\n\n\n\t\t//\n\t\t// Private\n\t\t//\n\n\n\t\t_popView: function _popView(poppedView, options) {\n\n\t\t\toptions = _.defaults(options || {}, {\n\t\t\t\tsilent: false\n\t\t\t});\n\n\t\t\tvar elementPoppedView = null;\n\t\t\tif ( poppedView instanceof Backbone.View ){\n\t\t\t\tvar index = _.findIndex(this._stack, function (el) {\n\t\t\t\t\treturn el.view == poppedView;\n\t\t\t\t});\n\t\t\t\telementPoppedView = this._stack.splice(index, 1);\n\t\t\t\tif ( _.isArray(elementPoppedView) )\n\t\t\t\t\telementPoppedView = elementPoppedView[0];\n\t\t\t}else{\n\t\t\t\telementPoppedView = this._stack.pop();\n\t\t\t}\n\n\t\t\tif ( !_.isObject(elementPoppedView) || !elementPoppedView.view ){\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tpoppedView = elementPoppedView.view;\n\n\t\t\t// Assegno la nuova view corrente\n\t\t\tvar el = this._stack[ this._stack.length-1 ];\n\t\t\tif ( _.isObject(el) && el.view ){\n\n\t\t\t\tthis._current = el.view;\n\t\t\t\t// Hooks activate\n\t\t\t\tthis._hookActivate( this._current, !!elementPoppedView.options.animatePreviousView, false );\n\t\t\t}\n\n\t\t\tif (!options.silent) {\n\t\t\t\tthis.trigger('popped', poppedView);\n\t\t\t}\n\n\t\t\tthis.refreshUrl();\n\n\t\t\treturn poppedView;\n\t\t},\n\n\t\t_hookActivate: function _hookActivate(view, animate, firstTime) {\n\t\t\tif ( !(view instanceof Backbone.View) )\n\t\t\t\treturn this;\n\n\t\t\t// Hook on before\n\t\t\tif ( view.onBeforeActivate )\n\t\t\t\tview.onBeforeActivate(firstTime);\n\n\n\t\t\tif ( !animate ){\n\t\t\t\trunActivateHook();\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tvar animationPushDuration = null;\n\n\t\t\t// I get the entry animation runtime. If it is done by javascript\n\t\t\tif ( view.getAnimationPushDuration )\n\t\t\t\tanimationPushDuration = view.getAnimationPushDuration();\n\n\t\t\tif ( _.isNumber(animationPushDuration)){\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\trunActivateHook();\n\t\t\t\t}, animationPushDuration);\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\t// I wait for the end of the CSS's animation with a particular name.\n\t\t\tif ( !_.isEmpty(animationPushDuration) && _.isString(animationPushDuration) ){\n\t\t\t\tview.$el.on(_animationEnd, function (e) {\n\t\t\t\t\tif ( e && e.originalEvent && e.originalEvent.animationName == animationPushDuration ){\n\t\t\t\t\t\tpoppedView.$el.off(_animationEnd);\n\t\t\t\t\t\trunActivateHook();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\t// I wait for the end of the CSS's animation.\n\t\t\tview.$el.one(_animationEnd, function (e) {\n\t\t\t\trunActivateHook();\n\t\t\t});\n\n\t\t\treturn this;\n\n\t\t\tfunction runActivateHook() {\n\t\t\t\tif ( view.onActivate )\n\t\t\t\t\tview.onActivate(firstTime);\n\t\t\t}\n\n\t\t},\n\n\t\t_hookDeactive: function _hookDeactive(view, animate) {\n\t\t\tif ( !(view instanceof Backbone.View) )\n\t\t\t\treturn this;\n\n\t\t\t// Hook on before deactivate old active view\n\t\t\tif ( view && view.onBeforeDeactivate )\n\t\t\t\tview.onBeforeDeactivate();\n\n\t\t\t// if the request is not the animation\n\t\t\tif ( !animate ){\n\t\t\t\trunDeactivateHook();\n\t\t\t\treturn this;\n\t\t\t}\n\n\n\t\t\tvar animationPopDuration = null;\n\n\t\t\t// I get the animation runtime. If it is done by javascript\n\t\t\tif ( view.getAnimationPopDuration )\n\t\t\t\tanimationPopDuration = view.getAnimationPopDuration();\n\n\t\t\tif ( _.isNumber(animationPopDuration) ){\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\trunDeactivateHook();\n\t\t\t\t}, animationPopDuration);\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\t// I wait for the end of the CSS's animation with a particular name.\n\t\t\tif ( !_.isEmpty(animationPopDuration) && _.isString(animationPopDuration) ){\n\t\t\t\tview.$el.on(_animationEnd, function (e) {\n\t\t\t\t\tif ( e && e.originalEvent && e.originalEvent.animationName == animationPopDuration ){\n\t\t\t\t\t\tpoppedView.$el.off(_animationEnd);\n\t\t\t\t\t\trunDeactivateHook();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\t// I wait for the end of the CSS's animation.\n\t\t\tview.$el.one(_animationEnd, function (e) {\n\t\t\t\trunDeactivateHook();\n\t\t\t});\n\n\t\t\treturn this;\n\n\t\t\tfunction runDeactivateHook(){\n\t\t\t\tif ( view.onDeactivate )\n\t\t\t\t\tview.onDeactivate();\n\t\t\t}\n\t\t}\n\n\t});\n\n\n\tViewStack.middleware = function middleware(options){\n\t\tif (!options)\n\t\t\toptions = {};\n\n\t\treturn function(context, next){\n\t\t\toptions.context = context;\n\t\t\tvar vs = new ViewStack(options);\n\t\t\tvs.clearStack();\n\t\t\tvs.render();\n\t\t\tcontext.viewstack = vs;\n\t\t\tnext();\n\t\t};\n\t};\n\n\treturn ViewStack;\n\n}));\n"
  ]
}